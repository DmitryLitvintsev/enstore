#!/bin/sh

if [ "${1:-}" = "-x" ] ; then set -xv; shift; fi
#set -u  # force better programming and ability to use check for not set

# the user must specify a drive
if [ -z "${1-}" ] ; then 
  echo "Usage eject drive-to-eject mt-command"
fi 

# the user can specify an mt command, or else we default to status
if [ -n "${2-}" ] ; then 
  command=$2
else 
  command=status
fi

drive=`echo $1 | tr '[A-Z]' '[a-z]'`
case $drive in
  dm05) cmd="rsh rip2 'mt -f /dev/rmt/tps2d2 $command'" ;;
  dm06) cmd="rsh rip2 'mt -f /dev/rmt/tps2d4 $command'" ;;
  dm07) cmd="rsh rip2 'mt -f /dev/rmt/tps2d1 $command'" ;;
  dm08) cmd="rsh rip2 'mt -f /dev/rmt/tps2d3 $command'" ;;
  dm11) cmd="rsh rip2 'mt -f /dev/rmt/tps2d5 $command'" ;;
  dm12) cmd="rsh rip2 'mt -f /dev/rmt/tps2d6 $command'" ;;
  de13) cmd="rsh rip1 'mt -f /dev/rmt/tps2d1 $command'" ;;
  de14) cmd="rsh rip1 'mt -f /dev/rmt/tps2d2 $command'" ;;
  de15) cmd="rsh rip1 'mt -f /dev/rmt/tps2d3 $command'" ;;
  de16) cmd="rsh rip1 'mt -f /dev/rmt/tps2d4 $command'" ;;
esac
echo $cmd
eval $cmd
