#!/bin/sh
set -u  # force better programming and ability to use check for not set
if [ "${1:-}" = "-x" ] ; then set -xv; shift; fi

# bin/$RCSfile$  $Revision$

# declare the volumes used on the rip test system

USAGE="`basename $0` <red50|red20|ait|dlt|mam|disk|samait|samdlt|sammam>"

if [ -z "${1-}" ] ; then
  echo "$USAGE"
  exit 1
fi

case $1 in
  red50) rm -fr    /pnfs/stk/red50/*
         mkdir     /pnfs/stk/red50/volmap
	 chmod 777 /pnfs/stk/red50/volmap
         volumes_del="
                      000004
                      000005
                      000006
                      000007
                      000008
                      000009
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      red50 none redwood 000004 50000000000 50000000000
                      red50 none redwood 000005 50000000000 50000000000
                      red50 none redwood 000006 50000000000 50000000000
                      red50 none redwood 000007 50000000000 50000000000
                      red50 none redwood 000008 50000000000 50000000000
                      red50 none redwood 000009 50000000000 50000000000
                     "
         ;;
  red20) rm -fr    /pnfs/stk/red20/*
         mkdir     /pnfs/stk/red20/volmap
	 chmod 777 /pnfs/stk/red20/volmap
         volumes_del="
                      000020
                      000021
                      000022
                      000023
                      000024
                      000025
                      000026
                      000027
                      000028
                      000030
                      000031
                      000032
                      000033
                      000034
                      000035
                      000036
                      000037
                      000038
                      000039
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      red20 none redwood 000020 20000000000 20000000000
                      red20 none redwood 000021 20000000000 20000000000
                      red20 none redwood 000022 20000000000 20000000000
                      red20 none redwood 000023 20000000000 20000000000
                      red20 none redwood 000024 20000000000 20000000000
                      red20 none redwood 000025 20000000000 20000000000
                      red20 none redwood 000026 20000000000 20000000000
                      red20 none redwood 000027 20000000000 20000000000
                      red20 none redwood 000028 20000000000 20000000000
                      red20 none redwood 000030 20000000000 20000000000
                      red20 none redwood 000031 20000000000 20000000000
                      red20 none redwood 000032 20000000000 20000000000
                      red20 none redwood 000033 20000000000 20000000000
                      red20 none redwood 000034 20000000000 20000000000
                      red20 none redwood 000035 20000000000 20000000000
                      red20 none redwood 000036 20000000000 20000000000
                      red20 none redwood 000037 20000000000 20000000000
                      red20 none redwood 000038 20000000000 20000000000
                      red20 none redwood 000039 20000000000 20000000000
                     "
         ;;
  ait)   rm -fr    /pnfs/grau/ait/*
         mkdir     /pnfs/grau/ait/volmap
	 chmod 777 /pnfs/grau/ait/volmap
         volumes_del="
                      CA2901
                      CA2902
                      CA2903
                      CA2904
                      CA2905
                      CA2906
                      CA2907
                      CA2908
                      CA2909
                      CA2910
                      CA2911
                      CA2912
                      CA2913
                      CA2914
                      CA2915
                      CA2916
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      ait   none 8MM     CA2901 26016563200 26016563200
                      ait   none 8MM     CA2902 26016563200 26016563200
                      ait   none 8MM     CA2903 26016563200 26016563200
                      ait   none 8MM     CA2904 26016563200 26016563200
                      ait   none 8MM     CA2905 26016563200 26016563200
                      ait   none 8MM     CA2906 26016563200 26016563200
                      ait   none 8MM     CA2907 26016563200 26016563200
                      ait   none 8MM     CA2908 26016563200 26016563200
                      ait   none 8MM     CA2909 26016563200 26016563200
                      ait   none 8MM     CA2910 26016563200 26016563200
                      ait   none 8MM     CA2911 26016563200 26016563200
                      ait   none 8MM     CA2912 26016563200 26016563200
                      ait   none 8MM     CA2913 26016563200 26016563200
                      ait   none 8MM     CA2914 26016563200 26016563200
                      ait   none 8MM     CA2915 26016563200 26016563200
                      ait   none 8MM     CA2916 26016563200 26016563200
                     "
         ;;
  samait)rm -fr    /pnfs/sam/ait/*
         mkdir     /pnfs/sam/ait/volmap
	 chmod 777 /pnfs/sam/ait/volmap
         volumes_del="
                      CA2945
                      CA2946
                      CA2947
                      CA2948
                      CA2949
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      samait   none 8MM     CA2945 26016563200 26016563200
                      samait   none 8MM     CA2946 26016563200 26016563200
                      samait   none 8MM     CA2947 26016563200 26016563200
                      samait   none 8MM     CA2948 26016563200 26016563200
                      samait   none 8MM     CA2949 26016563200 26016563200
                     "
         ;;
  mam)   rm -fr    /pnfs/grau/mammoth/*
         mkdir     /pnfs/grau/mammoth/volmap
	 chmod 777 /pnfs/grau/mammoth/volmap
         volumes_del="
                      CA2251
                      CA2252
                      CA2253
                      CA2254
                      CA2255
                      CA2256
                      CA2257
                      CA2258
                      CA2259
                      CA2260
                      CA2261
                      CA2262
                      CA2263
                      CA2264
                      CA2265
                      CA2266
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      mam   none 8MM     CA2251 20113227776 20113227776
                      mam   none 8MM     CA2252 20113227776 20113227776
                      mam   none 8MM     CA2253 20113227776 20113227776
                      mam   none 8MM     CA2254 20113227776 20113227776
                      mam   none 8MM     CA2255 20113227776 20113227776
                      mam   none 8MM     CA2256 20113227776 20113227776
                      mam   none 8MM     CA2257 20113227776 20113227776
                      mam   none 8MM     CA2258 20113227776 20113227776
                      mam   none 8MM     CA2259 20113227776 20113227776
                      mam   none 8MM     CA2260 20113227776 20113227776
                      mam   none 8MM     CA2261 20113227776 20113227776
                      mam   none 8MM     CA2262 20113227776 20113227776
                      mam   none 8MM     CA2263 20113227776 20113227776
                      mam   none 8MM     CA2264 20113227776 20113227776
                      mam   none 8MM     CA2265 20113227776 20113227776
                      mam   none 8MM     CA2266 20113227776 20113227776
                     "
         ;;
  sammam)rm -fr    /pnfs/sam/mammoth/*
         mkdir     /pnfs/sam/mammoth/volmap
	 chmod 777 /pnfs/sam/mammoth/volmap
         volumes_del="
                      CA2270
                      CA2271
                      CA2272
                      CA2273
                      CA2274
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      sammam   none 8MM     CA2270 20113227776 20113227776
                      sammam   none 8MM     CA2271 20113227776 20113227776
                      sammam   none 8MM     CA2272 20113227776 20113227776
                      sammam   none 8MM     CA2273 20113227776 20113227776
                      sammam   none 8MM     CA2274 20113227776 20113227776
                     "
         ;;
  dlt)   rm -fr    /pnfs/grau/dlt/*
         mkdir     /pnfs/grau/dlt/volmap
	 chmod 777 /pnfs/grau/dlt/volmap
         volumes_del="
                      CA2501
                      CA2502
                      CA2503
                      CA2504
                      CA2505
                      CA2506
                      CA2507
                      CA2508
                      CA2509
                      CA2510
                      CA2511
                      CA2512
                      CA2513
                      CA2514
                      CA2515
                      CA2516
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      dlt   none DECDLT  CA2501 35520749568 35520749568
                      dlt   none DECDLT  CA2502 35520749568 35520749568
                      dlt   none DECDLT  CA2503 35520749568 35520749568
                      dlt   none DECDLT  CA2504 35520749568 35520749568
                      dlt   none DECDLT  CA2505 35520749568 35520749568
                      dlt   none DECDLT  CA2506 35520749568 35520749568
                      dlt   none DECDLT  CA2507 35520749568 35520749568
                      dlt   none DECDLT  CA2508 35520749568 35520749568
                      dlt   none DECDLT  CA2509 35520749568 35520749568
                      dlt   none DECDLT  CA2510 35520749568 35520749568
                      dlt   none DECDLT  CA2511 35520749568 35520749568
                      dlt   none DECDLT  CA2512 35520749568 35520749568
                      dlt   none DECDLT  CA2513 35520749568 35520749568
                      dlt   none DECDLT  CA2514 35520749568 35520749568
                      dlt   none DECDLT  CA2515 35520749568 35520749568
                      dlt   none DECDLT  CA2516 35520749568 35520749568
                     "
         ;;
  samdlt)rm -fr    /pnfs/sam/dlt/*
         mkdir     /pnfs/sam/dlt/volmap
	 chmod 777 /pnfs/sam/dlt/volmap
         volumes_del="
                      CA2545
                      CA2546
                      CA2547
                      CA2548
                      CA2549
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      samdlt   none DECDLT  CA2545 35520749568 35520749568
                      samdlt   none DECDLT  CA2546 35520749568 35520749568
                      samdlt   none DECDLT  CA2547 35520749568 35520749568
                      samdlt   none DECDLT  CA2548 35520749568 35520749568
                      samdlt   none DECDLT  CA2549 35520749568 35520749568
                     "
         ;;
  disk)  rm -fr    /pnfs/rip6/*
         rm -fr    /raid/rip6/*
         mkdir     /pnfs/rip6/volmap
	 chmod 777 /pnfs/rip6/volmap
         volumes_del="
	              null-01
	              null-02
	              null-03
	              null-04
	              null-05
	              null-06
	              null-07
	              null-08
	              null-09
	              null-10
	              null-11
	              null-12
	              null-13
	              null-14
	              null-15
	              null-16
	              null-17
	              null-18
	              null-19
	              null-20
                      disk-01
                      disk-02
                      disk-03
                      disk-04
                      disk-05
                      disk-06
                      disk-07
                      disk-08
                      disk-09
                      disk-11
                      disk-12
                      disk-13
                      disk-14
                      disk-15
                      disk-16
                      disk-17
                      disk-18
                      disk-19
                      disk-21
                      disk-22
                      disk-23
                      disk-24
                      disk-25
                      disk-26
                      disk-27
                      disk-28
                      disk-29
                      disk-31
                      disk-32
                      disk-33
                      disk-34
                      disk-35
                      disk-36
                      disk-37
                      disk-38
                      disk-39
                      disk-41
                      disk-42
                      disk-43
                      disk-44
                      disk-45
                      disk-46
                      disk-47
                      disk-48
                      disk-49
                      disk-51
                      disk-52
                      disk-53
                      disk-54
                      disk-55
                      disk-56
                      disk-57
                      disk-58
                      disk-59
                     "
#                     lib   ff   medtype   label   capacity    bytes left
         volumes="
                      null none  diskfile  null-01 214748364800 214748364800
                      null none  diskfile  null-02 214748364800 214748364800
                      null none  diskfile  null-03 214748364800 214748364800
                      null none  diskfile  null-04 214748364800 214748364800
                      null none  diskfile  null-05 214748364800 214748364800
                      null none  diskfile  null-06 214748364800 214748364800
                      null none  diskfile  null-07 214748364800 214748364800
                      null none  diskfile  null-08 214748364800 214748364800
                      null none  diskfile  null-09 214748364800 214748364800
                      null none  diskfile  null-10 214748364800 214748364800
                      null none  diskfile  null-11 2147483648000 2147483648000
                      null none  diskfile  null-12 2147483648000 2147483648000
                      null none  diskfile  null-13 2147483648000 2147483648000
                      null none  diskfile  null-14 2147483648000 2147483648000
                      null none  diskfile  null-15 2147483648000 2147483648000
                      null none  diskfile  null-16 2147483648000 2147483648000
                      null none  diskfile  null-17 2147483648000 2147483648000
                      null none  diskfile  null-18 2147483648000 2147483648000
                      null none  diskfile  null-19 2147483648000 2147483648000
                      null none  diskfile  null-20 2147483648000 214748364800
                      disk none  diskfile  disk-01      140000      140000
                      disk none  diskfile  disk-02      140000      140000
                      disk none  diskfile  disk-03     1400000     1400000
                      disk none  diskfile  disk-04    14000000     1400000
                      disk none  diskfile  disk-05    14000000    14000000
                      disk none  diskfile  disk-06    14000000    14000000
                      disk none  diskfile  disk-07   140000000   140000000
                      disk none  diskfile  disk-08   140000000   140000000
                      disk none  diskfile  disk-09  1400000000  1400000000
                      disk none  diskfile  disk-11      140000      140000
                      disk none  diskfile  disk-12      140000      140000
                      disk none  diskfile  disk-13     1400000     1400000
                      disk none  diskfile  disk-14    14000000     1400000
                      disk none  diskfile  disk-15    14000000    14000000
                      disk none  diskfile  disk-16    14000000    14000000
                      disk none  diskfile  disk-17   140000000   140000000
                      disk none  diskfile  disk-18   140000000   140000000
                      disk none  diskfile  disk-19  1400000000  1400000000
                      disk none  diskfile  disk-21      140000      140000
                      disk none  diskfile  disk-22      140000      140000
                      disk none  diskfile  disk-23     1400000     1400000
                      disk none  diskfile  disk-24    14000000     1400000
                      disk none  diskfile  disk-25    14000000    14000000
                      disk none  diskfile  disk-26    14000000    14000000
                      disk none  diskfile  disk-27   140000000   140000000
                      disk none  diskfile  disk-28   140000000   140000000
                      disk none  diskfile  disk-29  1400000000  1400000000
                      disk none  diskfile  disk-31      140000      140000
                      disk none  diskfile  disk-32      140000      140000
                      disk none  diskfile  disk-33     1400000     1400000
                      disk none  diskfile  disk-34    14000000     1400000
                      disk none  diskfile  disk-35    14000000    14000000
                      disk none  diskfile  disk-36    14000000    14000000
                      disk none  diskfile  disk-37   140000000   140000000
                      disk none  diskfile  disk-38   140000000   140000000
                      disk none  diskfile  disk-39  1400000000  1400000000
                      disk none  diskfile  disk-41      140000      140000
                      disk none  diskfile  disk-42      140000      140000
                      disk none  diskfile  disk-43     1400000     1400000
                      disk none  diskfile  disk-44    14000000     1400000
                      disk none  diskfile  disk-45    14000000    14000000
                      disk none  diskfile  disk-46    14000000    14000000
                      disk none  diskfile  disk-47   140000000   140000000
                      disk none  diskfile  disk-48   140000000   140000000
                      disk none  diskfile  disk-49  1400000000  1400000000
                      disk none  diskfile  disk-51      140000      140000
                      disk none  diskfile  disk-52      140000      140000
                      disk none  diskfile  disk-53     1400000     1400000
                      disk none  diskfile  disk-54    14000000     1400000
                      disk none  diskfile  disk-55    14000000    14000000
                      disk none  diskfile  disk-56    14000000    14000000
                      disk none  diskfile  disk-57   140000000   140000000
                      disk none  diskfile  disk-58   140000000   140000000
                      disk none  diskfile  disk-59  1400000000  1400000000
                     "
         ;;
  *)     echo "$USAGE"
         exit 1
         ;;
esac

oldifs="$IFS"
IFS="
"
newifs="$IFS"

# Delete all the old volumes, just in case they are already defined
for vol in ${volumes_del}; do
  IFS=$oldifs
  vol=`echo $vol`
  if [ "${vol}x" != "x" ] ; then
    echo ecmd delvol $vol
         ecmd delvol $vol
    if [ $? != 0 ] ; then echo \'ERROR\'; fi
  fi
  IFS=$newifs
done

# Declare some new volumes
for vol in $volumes; do
  IFS=$oldifs
  vol=`echo $vol`
  if [ "${vol}x" != "x" ] ; then
    echo ecmd addvol $vol
         ecmd addvol $vol
    if [ $? != 0 ] ; then echo \'ERROR\'; fi
  fi
  IFS=$newifs
done

IFS="$oldifs"
