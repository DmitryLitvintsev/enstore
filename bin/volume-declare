#!/bin/sh
set -u  # force better programming and ability to use check for not set
if [ "${1:-}" = "-x" ] ; then set -xv; shift; fi

# bin/$RCSfile$  $Revision$

# declare the volumes used on the rip test system

USAGE="`basename $0` <red50|red20|ait|dlt|mam|rip6|samait|samdlt|sammam>"

if [ -z "${1-}" ] ; then
  echo "$USAGE"
  exit 1
fi

case $1 in
  red50) rm -fr /pnfs/stk/red50/*
         volumes_del="
                      000004
                      000005
                      000006
                      000007
                      000008
                      000009
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      red50 none redwood 000004 50000000000 50000000000
                      red50 none redwood 000005 50000000000 50000000000
                      red50 none redwood 000006 50000000000 50000000000
                      red50 none redwood 000007 50000000000 50000000000
                      red50 none redwood 000008 50000000000 50000000000
                      red50 none redwood 000009 50000000000 50000000000
                     "
         ;;
  red20) rm -fr /pnfs/stk/red20/*
         volumes_del="
                      000020
                      000021
                      000022
                      000023
                      000024
                      000025
                      000026
                      000027
                      000028
                      000030
                      000031
                      000032
                      000033
                      000034
                      000035
                      000036
                      000037
                      000038
                      000039
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      red20 none redwood 000020 20000000000 20000000000
                      red20 none redwood 000021 20000000000 20000000000
                      red20 none redwood 000022 20000000000 20000000000
                      red20 none redwood 000023 20000000000 20000000000
                      red20 none redwood 000024 20000000000 20000000000
                      red20 none redwood 000025 20000000000 20000000000
                      red20 none redwood 000026 20000000000 20000000000
                      red20 none redwood 000027 20000000000 20000000000
                      red20 none redwood 000028 20000000000 20000000000
                      red20 none redwood 000030 20000000000 20000000000
                      red20 none redwood 000031 20000000000 20000000000
                      red20 none redwood 000032 20000000000 20000000000
                      red20 none redwood 000033 20000000000 20000000000
                      red20 none redwood 000034 20000000000 20000000000
                      red20 none redwood 000035 20000000000 20000000000
                      red20 none redwood 000036 20000000000 20000000000
                      red20 none redwood 000037 20000000000 20000000000
                      red20 none redwood 000038 20000000000 20000000000
                      red20 none redwood 000039 20000000000 20000000000
                     "
         ;;
  ait)   rm -fr /pnfs/grau/ait/*
         volumes_del="
                      CA2901
                      CA2902
                      CA2903
                      CA2904
                      CA2905
                      CA2906
                      CA2907
                      CA2908
                      CA2909
                      CA2910
                      CA2911
                      CA2912
                      CA2913
                      CA2914
                      CA2915
                      CA2916
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      ait   none 8MM     CA2901 10737418240 10737418240
                      ait   none 8MM     CA2902 10737418240 10737418240
                      ait   none 8MM     CA2903 10737418240 10737418240
                      ait   none 8MM     CA2904 10737418240 10737418240
                      ait   none 8MM     CA2905 10737418240 10737418240
                      ait   none 8MM     CA2906 10737418240 10737418240
                      ait   none 8MM     CA2907 10737418240 10737418240
                      ait   none 8MM     CA2908 10737418240 10737418240
                      ait   none 8MM     CA2909 10737418240 10737418240
                      ait   none 8MM     CA2910 10737418240 10737418240
                      ait   none 8MM     CA2911 10737418240 10737418240
                      ait   none 8MM     CA2912 10737418240 10737418240
                      ait   none 8MM     CA2913 10737418240 10737418240
                      ait   none 8MM     CA2914 10737418240 10737418240
                      ait   none 8MM     CA2915 10737418240 10737418240
                      ait   none 8MM     CA2916 10737418240 10737418240
                     "
         ;;
  samait)   rm -fr /pnfs/sam/ait/*
         volumes_del="
                      CA2945
                      CA2946
                      CA2947
                      CA2948
                      CA2949
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      samait   none 8MM     CA2945 16106127360 16106127360
                      samait   none 8MM     CA2946 16106127360 16106127360
                      samait   none 8MM     CA2947 16106127360 16106127360
                      samait   none 8MM     CA2948 16106127360 16106127360
                      samait   none 8MM     CA2949 16106127360 16106127360
                     "
         ;;
  mam)   rm -fr /pnfs/grau/mammoth/*
         volumes_del="
                      CA2251
                      CA2252
                      CA2253
                      CA2254
                      CA2255
                      CA2256
                      CA2257
                      CA2258
                      CA2259
                      CA2260
                      CA2261
                      CA2262
                      CA2263
                      CA2264
                      CA2265
                      CA2266
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      mam   none 8MM     CA2251 10737418240 10737418240
                      mam   none 8MM     CA2252 10737418240 10737418240
                      mam   none 8MM     CA2253 10737418240 10737418240
                      mam   none 8MM     CA2254 10737418240 10737418240
                      mam   none 8MM     CA2255 10737418240 10737418240
                      mam   none 8MM     CA2256 10737418240 10737418240
                      mam   none 8MM     CA2257 10737418240 10737418240
                      mam   none 8MM     CA2258 10737418240 10737418240
                      mam   none 8MM     CA2259 10737418240 10737418240
                      mam   none 8MM     CA2260 10737418240 10737418240
                      mam   none 8MM     CA2261 10737418240 10737418240
                      mam   none 8MM     CA2262 10737418240 10737418240
                      mam   none 8MM     CA2263 10737418240 10737418240
                      mam   none 8MM     CA2264 10737418240 10737418240
                      mam   none 8MM     CA2265 10737418240 10737418240
                      mam   none 8MM     CA2266 10737418240 10737418240
                     "
         ;;
  sammam)   rm -fr /pnfs/sam/mammoth/*
         volumes_del="
                      CA2270
                      CA2271
                      CA2272
                      CA2273
                      CA2274
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      samman   none 8MM     CA2270 16106127360 16106127360
                      samman   none 8MM     CA2271 16106127360 16106127360
                      samman   none 8MM     CA2272 16106127360 16106127360
                      samman   none 8MM     CA2273 16106127360 16106127360
                      samman   none 8MM     CA2274 16106127360 16106127360
                     "
         ;;
  dlt)   rm -fr /pnfs/grau/dlt/*
         volumes_del="
                      CA2501
                      CA2502
                      CA2503
                      CA2504
                      CA2505
                      CA2506
                      CA2507
                      CA2508
                      CA2509
                      CA2510
                      CA2511
                      CA2512
                      CA2513
                      CA2514
                      CA2515
                      CA2516
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      dlt   none DECDLT  CA2501 10737418240 10737418240
                      dlt   none DECDLT  CA2502 10737418240 10737418240
                      dlt   none DECDLT  CA2503 10737418240 10737418240
                      dlt   none DECDLT  CA2504 10737418240 10737418240
                      dlt   none DECDLT  CA2505 10737418240 10737418240
                      dlt   none DECDLT  CA2506 10737418240 10737418240
                      dlt   none DECDLT  CA2507 10737418240 10737418240
                      dlt   none DECDLT  CA2508 10737418240 10737418240
                      dlt   none DECDLT  CA2509 10737418240 10737418240
                      dlt   none DECDLT  CA2510 10737418240 10737418240
                      dlt   none DECDLT  CA2511 10737418240 10737418240
                      dlt   none DECDLT  CA2512 10737418240 10737418240
                      dlt   none DECDLT  CA2513 10737418240 10737418240
                      dlt   none DECDLT  CA2514 10737418240 10737418240
                      dlt   none DECDLT  CA2515 10737418240 10737418240
                      dlt   none DECDLT  CA2516 10737418240 10737418240
                     "
         ;;
  samdlt)   rm -fr /pnfs/sam/dlt/*
         volumes_del="
                      CA2545
                      CA2546
                      CA2547
                      CA2548
                      CA2549
                     "
#                     lib   ff   medtype label  capacity    bytes left
         volumes="
                      samdlt   none DECDLT  CA2545 16106127360 16106127360
                      samdlt   none DECDLT  CA2546 16106127360 16106127360
                      samdlt   none DECDLT  CA2547 16106127360 16106127360
                      samdlt   none DECDLT  CA2548 16106127360 16106127360
                      samdlt   none DECDLT  CA2549 16106127360 16106127360
                     "
         ;;
  rip6)  rm -fr /pnfs/rip6/*
         rm -fr /rip6a/rip6/*
         volumes_del="
                      rip6-01
                      rip6-02
                      rip6-03
                      rip6-04
                      rip6-05
                      rip6-06
                      rip6-07
                      rip6-08
                      rip6-09
                      rip6-11
                      rip6-12
                      rip6-13
                      rip6-14
                      rip6-15
                      rip6-16
                      rip6-17
                      rip6-18
                      rip6-19
                      rip6-21
                      rip6-22
                      rip6-23
                      rip6-24
                      rip6-25
                      rip6-26
                      rip6-27
                      rip6-28
                      rip6-29
                      rip6-31
                      rip6-32
                      rip6-33
                      rip6-34
                      rip6-35
                      rip6-36
                      rip6-37
                      rip6-38
                      rip6-39
                      rip6-41
                      rip6-42
                      rip6-43
                      rip6-44
                      rip6-45
                      rip6-46
                      rip6-47
                      rip6-48
                      rip6-49
                      rip6-51
                      rip6-52
                      rip6-53
                      rip6-54
                      rip6-55
                      rip6-56
                      rip6-57
                      rip6-58
                      rip6-59
                     "
#                     lib   ff   medtype   label   capacity    bytes left
         volumes="
                      rip6 none  diskfile  rip6-01      140000      140000
                      rip6 none  diskfile  rip6-02      140000      140000
                      rip6 none  diskfile  rip6-03     1400000     1400000
                      rip6 none  diskfile  rip6-04    14000000     1400000
                      rip6 none  diskfile  rip6-05    14000000    14000000
                      rip6 none  diskfile  rip6-06    14000000    14000000
                      rip6 none  diskfile  rip6-07   140000000   140000000
                      rip6 none  diskfile  rip6-08   140000000   140000000
                      rip6 none  diskfile  rip6-09  1400000000  1400000000
                      rip6 none  diskfile  rip6-11      140000      140000
                      rip6 none  diskfile  rip6-12      140000      140000
                      rip6 none  diskfile  rip6-13     1400000     1400000
                      rip6 none  diskfile  rip6-14    14000000     1400000
                      rip6 none  diskfile  rip6-15    14000000    14000000
                      rip6 none  diskfile  rip6-16    14000000    14000000
                      rip6 none  diskfile  rip6-17   140000000   140000000
                      rip6 none  diskfile  rip6-18   140000000   140000000
                      rip6 none  diskfile  rip6-19  1400000000  1400000000
                      rip6 none  diskfile  rip6-21      140000      140000
                      rip6 none  diskfile  rip6-22      140000      140000
                      rip6 none  diskfile  rip6-23     1400000     1400000
                      rip6 none  diskfile  rip6-24    14000000     1400000
                      rip6 none  diskfile  rip6-25    14000000    14000000
                      rip6 none  diskfile  rip6-26    14000000    14000000
                      rip6 none  diskfile  rip6-27   140000000   140000000
                      rip6 none  diskfile  rip6-28   140000000   140000000
                      rip6 none  diskfile  rip6-29  1400000000  1400000000
                      rip6 none  diskfile  rip6-31      140000      140000
                      rip6 none  diskfile  rip6-32      140000      140000
                      rip6 none  diskfile  rip6-33     1400000     1400000
                      rip6 none  diskfile  rip6-34    14000000     1400000
                      rip6 none  diskfile  rip6-35    14000000    14000000
                      rip6 none  diskfile  rip6-36    14000000    14000000
                      rip6 none  diskfile  rip6-37   140000000   140000000
                      rip6 none  diskfile  rip6-38   140000000   140000000
                      rip6 none  diskfile  rip6-39  1400000000  1400000000
                      rip6 none  diskfile  rip6-41      140000      140000
                      rip6 none  diskfile  rip6-42      140000      140000
                      rip6 none  diskfile  rip6-43     1400000     1400000
                      rip6 none  diskfile  rip6-44    14000000     1400000
                      rip6 none  diskfile  rip6-45    14000000    14000000
                      rip6 none  diskfile  rip6-46    14000000    14000000
                      rip6 none  diskfile  rip6-47   140000000   140000000
                      rip6 none  diskfile  rip6-48   140000000   140000000
                      rip6 none  diskfile  rip6-49  1400000000  1400000000
                      rip6 none  diskfile  rip6-51      140000      140000
                      rip6 none  diskfile  rip6-52      140000      140000
                      rip6 none  diskfile  rip6-53     1400000     1400000
                      rip6 none  diskfile  rip6-54    14000000     1400000
                      rip6 none  diskfile  rip6-55    14000000    14000000
                      rip6 none  diskfile  rip6-56    14000000    14000000
                      rip6 none  diskfile  rip6-57   140000000   140000000
                      rip6 none  diskfile  rip6-58   140000000   140000000
                      rip6 none  diskfile  rip6-59  1400000000  1400000000
                     "
         ;;
  *)     echo "$USAGE"
         exit 1
         ;;
esac

oldifs="$IFS"
IFS="
"
newifs="$IFS"

# Delete all the old volumes, just in case they are already defined
for vol in ${volumes_del}; do
  IFS=$oldifs
  vol=`echo $vol`
  if [ "${vol}x" != "x" ] ; then
    echo ecmd delvol $vol
         ecmd delvol $vol
    if [ $? != 0 ] ; then echo \'ERROR\'; fi
  fi
  IFS=$newifs
done

# Declare some new volumes
for vol in $volumes; do
  IFS=$oldifs
  vol=`echo $vol`
  if [ "${vol}x" != "x" ] ; then
    echo ecmd addvol $vol
         ecmd addvol $vol
    if [ $? != 0 ] ; then echo \'ERROR\'; fi
  fi
  IFS=$newifs
done

IFS="$oldifs"
