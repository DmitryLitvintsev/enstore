create table encp_xfer (
date		timestamp not null,
node		varchar not null,
pid		int not null,
username	varchar not null,
src		text not null,
dst		text not null,
size		bigint not null,
rw		char(1) not null,
overall_rate	bigint not null,
net_rate	bigint not null,
drive_rate	bigint not null,
disk_rate	bigint,
trans_rate	bigint,
volume		varchar not null,
mover		varchar not null,
drive_id	varchar not null,
drive_sn	varchar not null,
elapsed		float not null,
media_changer	varchar not null,
mover_interface	varchar not null,
driver		varchar not null,
storage_group	varchar not null,
encp_ip		varchar not null,
encp_id 	varchar not null,
encp_version	varchar,
file_family	varchar,
wrapper		varchar);

create index xfr_date_idx on encp_xfer (date);
create index xfr_node_idx on encp_xfer (node);
create index xfr_pid_idx on encp_xfer (pid);
create index xfr_user_idx on encp_xfer (username);
create index xfr_volume_idx on encp_xfer (volume);
create index xfr_mover_idx on encp_xfer (mover);
create index xfr_media_changer_idx on encp_xfer (media_changer);
create index xfr_storage_group_idx on encp_xfer (storage_group);
create index xfr_oid_idx on encp_xfer (oid);

create table tape_mounts (
node	varchar(32) not null,
volume	varchar(16) not null,
type	varchar(32) not null,
logname	varchar(16) not null,
start	timestamp not null,
finish	timestamp,
state	char(1) not null);

create index tape_mnts_node_idx on tape_mounts (node);
create index tape_mnts_volume_idx on tape_mounts (volume);
create index tape_mnts_start_idx on tape_mounts (start);
create index tape_mnts_type_idx on tape_mounts (type);
create index tape_mnts_oid_idx on tape_mounts (oid);

create table tape_mounts_tmp (
volume	varchar(16),
state	varchar(1),
id	bigint,
primary key (volume, state));

create index tmt_oid_idx on tape_mounts_tmp (oid);

create table event (
tag		varchar(48) primary key,
name		varchar(32) not null,
node		varchar(32) not null,
username	varchar(32) not null,
start		timestamp without time zone not null,
finish		timestamp without time zone,
status		int,
comment		varchar(64));

create index event_name_idx on event(name);
create index event_node_idx on event(node);
create index event_start_idx on event(start);
create index event_oid_idx on event(oid);

create table encp_error(
	date		timestamp without time zone not null,
	node		varchar not null,
	pid		int not null,
	username	varchar not null,
	encp_id		varchar,
	version		varchar not null,
	type		varchar not null,
	error		varchar not null,
	src		varchar,
	dst		varchar,
	storage_group	varchar,
	size		bigint
);

