create table encp_xfer (
date	timestamp not null,
node	varchar(32) not null,
pid	int not null,
username	varchar(32) not null,
src	text not null,
dst	text not null,
size	bigint not null,
rw	char(1) not null,
rate	bigint not null,
net_rate	bigint not null,
drive_rate	bigint not null,
volume	varchar(16) not null,
mover	varchar(32) not null,
drive_id	varchar(16) not null,
drive_sn	varchar(16) not null,
elapsed	float not null,
media_changer	varchar(32) not null,
mover_interface	varchar(32) not null,
driver	varchar(16) not null,
storage_group	varchar(16) not null,
encp_ip	varchar(16) not null,
encp_id varchar(64) not null);

create index xfr_date_idx on encp_xfer (date);
create index xfr_node_idx on encp_xfer (node);
create index xfr_pid_idx on encp_xfer (pid);
create index xfr_user_idx on encp_xfer (username);
create index xfr_volume_idx on encp_xfer (volume);
create index xfr_mover_idx on encp_xfer (mover);
create index xfr_media_changer_idx on encp_xfer (media_changer);
create index xfr_storage_group_idx on encp_xfer (storage_group);
create index xfr_oid_idx on encp_xfer (oid);

create table tape_mounts (
node	varchar(32) not null,
volume	varchar(16) not null,
type	varchar(32) not null,
logname	varchar(16) not null,
start	timestamp not null,
finish	timestamp,
state	char(1) not null);

create index tape_mnts_node_idx on tape_mounts (node);
create index tape_mnts_volume_idx on tape_mounts (volume);
create index tape_mnts_start_idx on tape_mounts (start);
create index tape_mnts_type_idx on tape_mounts (type);
create index tape_mnts_oid_idx on tape_mounts (oid);

create table tape_mounts_tmp (
volume varchar(16),
state varchar(1),
id bigint,
primary key (volume, state));

create index tmt_oid_idx on tape_mounts_tmp (oid);
