# this file needs to be sourced!

# defaults first

enstore_config_host=localhost
enstore_config_port=7500
enstore_config_file="/pnfs/enstore/.(config)(flags)/enstore.conf"

enstore_libraries_all="airedaledisk.library_manager igordisk.library_manager pcfarm4disk.library_manager fndaprdisk.library_manager hppcdisk.library_manager fntt1disk.library_manager 8500.library_manager redwood50.library_manager"
enstore_media_changers_all="airedaledisk.media_changer igordisk.media_changer pcfarm4disk.media_changer fndaprdisk.media_changer hppcdisk.media_changer fntt1disk.media_changer FTT.media_changer STK.media_changer"
enstore_movers_all="airedaledisk.mover igordisk.mover pcfarm4disk.mover fndaprdisk.mover hppcdisk.mover fntt1disk.mover 8500.mover stk0.mover"

enstore_db=$ENSTORE_DIR/etc
enstore_libraries=""
enstore_media_changers=""
enstore_movers=""
enstore_start_config=0
enstore_start_fileclerk=0
enstore_start_volumeclerk=0
enstore_start_log=0
enstore_start_admin=0

if [ `uname -n | grep -c pcfarm9` -eq 1 ] ; then
  enstore_db=/bakken/bakken/enstore_db
  enstore_start_config=1
  enstore_start_fileclerk=1
  enstore_start_volumeclerk=1
  enstore_start_log=1
  enstore_start_admin=1

elif [ `uname -n | grep -c fntt1` -eq 1 ] ; then
  enstore_libraries="8500.library_manager fntt1disk.library_manager"
  enstore_media_changers="FTT.media_changer fntt1disk.media_changer"
  enstore_movers="8500.mover fntt1disk.mover"

elif [ `uname -n | grep -c fntt2` -eq 1 ] ; then
  enstore_libraries="redwood50.library_manager"
  enstore_media_changers="STK.media_changer"
  enstore_movers="stk0.mover"

elif [ `uname -n | grep -c fndapr` -eq 1 ] ; then
  enstore_libraries="fndaprdisk.library_manager"
  enstore_media_changers="fndaprdisk.media_changer"
  enstore_movers="fndaprdisk.mover"

elif [ `uname -n | grep -c airedale` -eq 1 ] ; then
  enstore_libraries="airedaledisk.library_manager"
  enstore_media_changers="airedaledisk.media_changer"
  enstore_movers="airedaledisk.mover"
  export J=/jon/enstore/airedaledisk.fake
  export P=/pnfs/enstore/airedale
  export V=/pnfs/enstore/volmap

elif [ `uname -n | grep -c igor` -eq 1 ] ; then
  enstore_libraries="igordisk.library_manager"
  enstore_media_changers="igordisk.media_changer"
  enstore_movers="igordisk.mover"

elif [ `uname -n | grep -c pcfarm4` -eq 1 ] ; then
  enstore_libraries="pcfarm4disk.library_manager"
  enstore_media_changers="pcfarm4disk.media_changer"
  enstore_movers="pcfarm4disk.mover"

elif [ `uname -n | grep -c hppc` -eq 1 ] ; then
  enstore_libraries="hppcdisk.library_manager"
  enstore_media_changers="hppcdisk.media_changer"
  enstore_movers="hppcdisk.mover"

fi

# if the user has environmental variable set, use them - or else use the defaults

if [ -n "${ENSTORE_CONFIG_HOST-}" ] ; then enstore_config_host=$ENSTORE_CONFIG_HOST; fi
if [ -n "${ENSTORE_CONFIG_PORT-}" ] ; then enstore_config_port=$ENSTORE_CONFIG_PORT; fi
if [ -n "${ENSTORE_CONFIG_FILE-}" ] ; then enstore_config_file=$ENSTORE_CONFIG_FILE; fi

if [ -n "${ENSTORE_LIBRARIES-}" ]      ; then enstore_libraries=$ENSTORE_LIBRARIES; fi
if [ -n "${ENSTORE_MEDIA_CHANGERS-}" ] ; then enstore_media_changers=$ENSTORE_MEDIA_CHANGERS; fi
if [ -n "${ENSTORE_MOVERS-}" ]         ; then enstore_movers=$ENSTORE_MOVERS; fi

if [ -n "${ENSTORE_DB-}" ]                 ; then enstore_db=$ENSTORE_DB; fi
if [ -n "${ENSTORE_START_CONFIG-}" ]       ; then enstore_start_config=$ENSTORE_START_CONFIG; fi
if [ -n "${ENSTORE_START_FILECLERK-}" ]    ; then enstore_start_fileclerk=$ENSTORE_START_CONFIG; fi
if [ -n "${ENSTORE_START_VOLUMECLERK-}" ]  ; then enstore_start_volumeclerk=$ENSTORE_START_CONFIG; fi
if [ -n "${ENSTORE_START_LOG-}" ]          ; then enstore_start_log=$ENSTORE_START_LOG; fi

ENSTORE_DB=$enstore_db
export ENSTORE_DB
