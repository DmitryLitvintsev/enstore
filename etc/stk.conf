#!/usr/bin/env python

# $Id$

KB=1024
MB=KB*KB
GB=KB*MB

configdict = {}

configdict['system'] = { 'allowed_down' : {'log_server' : [1,10],
                                           'alarm_server' : [1,10],
                                           'configuration_server' : [1,10],
                                           'file_clerk' : [1,10],
                                           'inquisitor' : [3,30],
                                           'volume_clerk' : [1,10],
                                           'library_manager' : [2,20],
                                           'media_changer' : [2,10],
                                           'default' : [1,20] }}

configdict['blocksizes'] = { '8MM'       : 131072,
                             'DECDLT'    : 131072,
                             'null'      : 131072,
                             '9840'      : 131072 }

configdict['database']     = { 'db_dir':'/diskb/enstore-database', 'jou_dir':'/diska/enstore-journal' }

# too many name server failures - use the numeric ip - 131.225.13.3 is stkensrv3
configdict['backup']       = { 'host':'131.225.13.3', 'dir':'/diska/enstore-backup'}

configdict['file_clerk']   = { 'host':'stkensrv1', 'port':7501, 'logname':'FILSRV' }
configdict['volume_clerk'] = { 'host':'stkensrv1', 'port':7502, 'logname':'VOLSRV' }
configdict['alarm_server'] = { 'host':'stkensrv2', 'port':7503 ,'logname':'ALMSRV' }
configdict['log_server']   = { 'host':'stkensrv2', 'port':7504, 'log_file_path':'/diska/enstore-log' }

configdict['inquisitor']   = { 'host':'stkensrv2', 'port':7505, 'logname':'INQSRV',
                               'timeout':1, 'alive_rcv_timeout': 5, 'alive_retries':1,
                               'refresh'          : 3600,
                               'html_file':'/local/ups/prd/www_pages/enstore/',
                               'http_log_file_path':'/enstore/log/',
                               'www_host':'http://stkensrv2.fnal.gov:',
                               'max_encp_lines': 250,
                               'user_log_dirs' : {'Stken Cluster SDR Info'         :'/enstore/SDR.html',
                                                  'Stken Cluster SEL Info'         :'/enstore/SEL.html',
                                                  'Stken Cluster Console Logs'     :'/enstore/CONSOLES.html',
                                                  'Stken Cluster Memory Chip2 Info':'/enstore/CHIP2.html',
                                                  'Stken Internode Rates'          :'/enstore/quickcheck.eepro100.html',
						  'StkEn Cluster UDP Clogup Info'  :'/enstore//UDPclog.html',
                                                  'Active Monitor Log'             :'/enstore/active_monitor.html',
						  'STK Silo Drive Status'          :'/enstore/STKDrvStat.html',
                                                  'PNFS Counters'                  :'/enstore/pnfsRate.html',
                                                  'PNFS Export List'               :'/enstore/pnfsExports.html',
#                                                 '6509 BigA Switch Info':'http://airedale.fnal.gov/biga.html',
						  'Enstore Node Information'       :'/enstore/nodeinfo.html',
						  'X Physical Cabling Layout'      :'/enstore/CABLES.html',
						  'AML/J Logs'                     :'/enstore/aml2log.html',
                                                  'AML/J Summary'                  :'/enstore/aml2rpt.html',
						  'AML/J Drive Status'             :'/enstore/AMLDrvStat.html'},
                               'update_commands': {'stkensrv1_raid_status.txt': 'rsh stkensrv1 \'/usr/local/bin/raidinfo\'',
                                                   'enstore_ps.txt'           : '/home/enstore/eps'},
                               'patrol_file':'http://www-stken.fnal.gov:/patrol/patrol.html',
                               'hung_rcv_timeout' : {'eagle.library_manager' : 120},
                               'hung_retries' : {'eagle.library_manager' : 2},
                               'default_server_interval': 90,
                               'intervals' : { 'eagle.library_manager' : 15, 'update_commands' : 600 } }

configdict['active_monitor']   = { 'server_port'      : 7499, 
                                   'html_file'        : '/local/ups/prd/www_pages/enstore/',
                                   'html_gen_host'    : 'stkensrv2',
                                   'refresh'          : 3600,
                                   'veto_nodes'       : {'rip3': 'not in system my reason'},
				   'block_size'       : 65536, 
                                   'block_count'      : 160,
	                           'default_timeout'  : 3}

configdict['www_server'] = { 'system_tag' : "STKEN: Enstore for the StorageTek Silo",
                             'media' : 'STK Powderhorn 9310',
                             'inq_ignore' : 1 }

configdict['null1.library_manager']     = { 'host':'stkensrv4',  'port':7511, 'logname':'NUL1BM','database':'/tmp/enstore/enstore/null',  'norestart':'INQ', }
configdict['eagle.library_manager']     = { 'host':'stkensrv4',  'port':7513, 'logname':'EAGLBM','database':'/tmp/enstore/enstore/eagle', 'norestart':'INQ', }
configdict['amlj-dlt.library_manager']  = { 'host':'stkensrv4',  'port':7514, 'logname':'JDLTLM','database':'/tmp/enstore/enstore/jdlt',  'norestart':'INQ', }

configdict['null1.media_changer']    = { 'host':'stkensrv4',  'port':7520, 'logname':'NUL1MC',  'type':'RDD_MediaLoader',  'norestart':'INQ' }
configdict['STK.media_changer']      = { 'host':'stkensrv4',  'port':7522, 'logname':'STKMC ',  'type':'STK_MediaLoader',  'norestart':'INQ', 'acls_host':'fntt', 'acls_uname':'acsss' }
configdict['DONP.media_changer']     = { 'host':'stkensrv4',  'port':7523, 'logname':'DONPMC ', 'type':'STK_MediaLoader',  'norestart':'INQ', 'acls_host':'fntt', 'acls_uname':'acsss' }
configdict['amlj.media_changer']     = { 'host':'stkensrv4',  'port':7524, 'logname':'AMLJMC',  'type':'AML2_MediaLoader', 'norestart':'INQ',
                                         'RobotArm':'R1', 'IdleTimeHome':30000000, 'IOBoxMedia':{'ACI_DECDLT':['E01']},
                                         'DriveCleanTime':{'DE':[60,1],'DC':[60,1],'DM':[60,1]}, 'CleanTapeFileFamily':'CleanTapeFileFamily.noWrapper'}


configdict['null41.mover'] = { 'host':'stkenmvr4a', 'data_ip':'stkenmvr4a','port':7535,'max_buffer':200*MB, 'logname':'NU41MV',
                               'library':'null1.library_manager', 'device':'/dev/null',    'driver':'NullDriver',
                               'mc_device':'-1', 'media_changer':'null1.media_changer', 'norestart':'INQ', }

configdict['null42.mover'] = { 'host':'stkenmvr4a', 'data_ip':'stkenmvr4b','port':7536, 'max_buffer':200*MB, 'logname':'NU42MV',
                               'library':'null1.library_manager', 'device':'/dev/null',    'driver':'NullDriver',
                               'mc_device':'-1', 'media_changer':'null1.media_changer', 'norestart':'INQ', }

configdict['null51.mover'] = { 'host':'stkenmvr5a', 'data_ip':'stkenmvr5a','port':7537,'max_buffer':200*MB, 'logname':'NU51MV',
                               'library':'null1.library_manager', 'device':'/dev/null',    'driver':'NullDriver',
                               'mc_device':'-1', 'media_changer':'null1.media_changer', 'norestart':'INQ', }

configdict['null52.mover'] = { 'host':'stkenmvr5a', 'data_ip':'stkenmvr5b','port':7538, 'max_buffer':200*MB, 'logname':'NU52MV',
                                 'library':'null1.library_manager', 'device':'/dev/null',    'driver':'NullDriver',
                                 'mc_device':'-1', 'media_changer':'null1.media_changer', 'norestart':'INQ', }

configdict['eagle11.mover'] = { 'host':'stkenmvr1a', 'data_ip':'stkenmvr1a','port':7550, 'max_buffer':200*MB, 'logname':'EA11MV',
                                 'library':'eagle.library_manager', 'device':'/dev/rmt/tps0d1n',   'driver':'FTTDriver',
                                 'mc_device':'0,0,10,0', 'media_changer':'STK.media_changer', 'norestart':'INQ', 'do_cleaning':'No'}

configdict['eagle12.mover'] = { 'host':'stkenmvr1a', 'data_ip':'stkenmvr1b','port':7551, 'max_buffer':200*MB, 'logname':'EA12MV',
                                 'library':'eagle.library_manager', 'device':'/dev/rmt/tps3d1n',   'driver':'FTTDriver',
                                 'mc_device':'0,0,10,1', 'media_changer':'STK.media_changer', 'norestart':'INQ', 'do_cleaning':'No'}

configdict['eagle21.mover'] = { 'host':'stkenmvr2a', 'data_ip':'stkenmvr2a','port':7552, 'max_buffer':200*MB, 'logname':'EA21MV',
                                 'library':'eagle.library_manager', 'device':'/dev/rmt/tps0d1n',   'driver':'FTTDriver',
                                 'mc_device':'0,0,10,2', 'media_changer':'STK.media_changer',  'norestart':'INQ', 'do_cleaning':'No'}

configdict['eagle22.mover'] = { 'host':'stkenmvr2a', 'data_ip':'stkenmvr2b','port':7553, 'max_buffer':200*MB, 'logname':'EA22MV',
                                 'library':'eagle.library_manager', 'device':'/dev/rmt/tps3d1n',   'driver':'FTTDriver',
                                 'mc_device':'0,0,10,3', 'media_changer':'STK.media_changer', 'norestart':'INQ', 'do_cleaning':'No'}

configdict['eagle31.mover'] = { 'host':'stkenmvr3a', 'data_ip':'stkenmvr3a','port':7554, 'max_buffer':200*MB, 'logname':'EA31MV',
                                 'library':'eagle.library_manager', 'device':'/dev/rmt/tps0d1n',   'driver':'FTTDriver',
                                 'mc_device':'0,0,10,4', 'media_changer':'STK.media_changer', 'norestart':'INQ', 'do_cleaning':'No'}

configdict['JDE01DLT.mover']  = { 'host':'rip9', 'data_ip':'rip9', 'port':7560, 'max_buffer':20*MB, 'logname':'JDE01MV',
                                 'library':['amlj-dlt.library_manager'], 'device':'/dev/rmt/tps2d5n', 'driver':'FTTDriver',
                                 'mc_device':'DE01', 'media_changer':'amlj.media_changer',  'norestart':'INQ', 'do_cleaning':'No' }

configdict['JDE02DLT.mover']  = { 'host':'rip9', 'data_ip':'rip9', 'port':7561, 'max_buffer':20*MB, 'logname':'JDE02MV',
                                 'library':['amlj-dlt.library_manager'], 'device':'/dev/rmt/tps2d4n', 'driver':'FTTDriver',
                                 'mc_device':'DE02', 'media_changer':'amlj.media_changer', 'norestart':'INQ', 'do_cleaning':'No' }

configdict['JDE03DLT.mover']  = { 'host':'rip9', 'data_ip':'rip9', 'port':7562, 'max_buffer':20*MB, 'logname':'JDE03MV',
                                 'library':['amlj-dlt.library_manager'], 'device':'/dev/rmt/tps2d1n', 'driver':'FTTDriver',
                                 'mc_device':'DE03', 'media_changer':'amlj.media_changer', 'norestart':'INQ', 'do_cleaning':'No' }

configdict['JDE04DLT.mover']  = { 'host':'rip9', 'data_ip':'rip9', 'port':7563, 'max_buffer':20*MB, 'logname':'JDE04MV',
                                 'library':['amlj-dlt.library_manager'], 'device':'/dev/rmt/tps2d0n', 'driver':'FTTDriver',
                                 'mc_device':'DE04', 'media_changer':'amlj.media_changer', 'norestart':'INQ', 'do_cleaning':'No' }

"""
From cgw@fnal.gov Thu Jul  6 22:34:19 2000
Date: Thu, 06 Jul 2000 16:09:51 -0500 (CDT)
From: Charles G Waldman <cgw@fnal.gov>
To: bakken@fnal.gov
Subject: V2 mover configuration


These are all the keys that the mover cares about:

host (string) REQUIRED

port (int) REQUIRED

logname (string) OPTIONAL - defaults to mover name

do_eject (string) OPTIONAL - defaults to 'yes', override by setting
                    "no" or "No" (or anything starting with N or n)

do_cleaning (string) OPTIONAL - defaults to 'yes', override by setting
                    "no" or "No" (or anything starting with N or n)
                    This only controls automatic cleaning.  enstore mov --clean-drive
                    will always work, whether this is set or not.

mc_device (string) not needed for NULL movers; required otherwise

media_type (string) OPTIONAL - defaults to "8MM"  (see note ***)

min_buffer (int)  OPTIONAL minimum amount of memory to allocate for
                      buffering - defaults to 8MB

max_buffer (int)  OPTIONAL maximum amount of memory to allocate for
		      buffering - defaults to 64MB

device (string) REQUIRED pathname to the UNIX tape device
			 for NULL movers make this /dev/null

dismount_delay (int) OPTIONAL delayed dismount value to use when none 
		     specified by the client.  Also, the client cannot
		     reduce this amount - they can ask for longer
		     dismount delay, but this value is a minimum.
		     Defaults to 60 seconds.
		     Set to negative value to get "infinite" dismount
		     delay.
mount_delay (int) OPTIONAL number of seconds to wait after media
		  changer mount completes, before trying to open
		  device. Default is 15 for FTT driver, 0 for NULL
		  driver

library (string or list):  REQUIRED.  Who are we working for?  One or
		  more library manager names.

driver (string): REQUIRED.  Currently must be 'FTTDriver' or
		 'NullDriver', or else mover will complain at startup.
		 If we need a disk mover, this would be easy to hack 
		 together; doesn't seem too useful though.

Notes:

***	   This is a bit of a hack.  When the mover starts up with a
volume, the delayed dismount timer gets started; if the timer expires
before any transaction comes in, the mover tries to dismount the
tape.  However it hasn't talked to the volume clerk and therefore
doesn't have the full vol_info ticket.  I can't just go query the
volume because I don't have a volume clerk address - this comes in on
an ENCP ticket.  I could go to my configuration and get the volume
clerk address from there, but we didn't want to do this - the mover
could possibly, for example, talk to different VC's if it's talking to
different LM's.  In order to dismount the volume, I need at least the
label and the media type.  If I don't have a media type, I get it from
the mover config.  Like I said, this is a hack.  I think the right fix
is to have the media changer client not require media type in the work
ticket - it should be able to dismount the volume without this info
(?)

"""

