#! /usr/bin/env python

# etc/$RCSfile$  $Revision$

KB=1024
MB=KB*KB
GB=KB*MB

configdict = {}

configdict['system'] = { 'allowed_down' : {'log_server' : [1,10],
                                           'alarm_server' : [1,10],
                                           'configuration_server' : [1,10],
                                           'file_clerk' : [1,10],
                                           'inquisitor' : [3,30],
                                           'volume_clerk' : [1,10],
                                           'library_manager' : [2,20],
                                           'media_changer' : [2,10],
                                           'default' : [1,20] }}

configdict['blocksizes'] = { 'null'      : 131072,
                             '8MM'       : 131072,
                             'DECDLT'    : 131072 }

configdict['database']     = { 'db_dir':'/raid/enstore/db', 'jou_dir':'/raid/enstore/jou' }

# too many name server failures - use the numeric ip - 131.225.164.8 is rip8
configdict['backup']       = { 'host':'131.225.164.8', 'dir':'/rip8a/enstore/db_backup'}

configdict['file_clerk']   = { 'host':'rip6',  'port':7501, 'logname':'FILSRV', 'norestart':'INQ' }
configdict['volume_clerk'] = { 'host':'rip6',  'port':7502, 'logname':'VOLSRV', 'norestart':'INQ' }
configdict['alarm_server'] = { 'host':'rip7',  'port':7503 ,'logname':'ALMSRV', 'norestart':'INQ' }
configdict['log_server']   = { 'host':'rip7',  'port':7504, 'log_file_path':'/master/ups/prd/www_pages/enstore/log', 'norestart':'INQ' }

configdict['inquisitor']   = { 'host':'rip7', 'port':7505, 'logname':'INQSRV',
                               'timeout':10, 'alive_rcv_timeout': 5, 'alive_retries':1,
                               'ascii_file':'/tmp',
                               'html_file':'/master/ups/prd/www_pages/enstore/',
                               'http_log_file_path':'/enstore/log/',
                               'www_host':'http://rip8.fnal.gov:',
                               'default_server_interval': 15,
                               'max_ascii_size': 100000000,
                               'intervals' : { 'update_commands' : 600 } }

configdict['www_server'] = { 'system_tag' : "RIP Test of New Mover/Library Manager",
                             'media' : 'ADIC AML/2',
                             'inq_ignore' : 1 }

#configdict['ait.library_manager']   = { 'host':'rip5',  'port':7514, 'logname':'AITLBM', 'database':'/tmp/enstore/enstore/ait',  'norestart':'INQ' }

configdict['mam.library_manager']    = {    'host':'rip5',
                                            'port':7515,
                                            'logname':'MAMLBM',
                                            'database':'/tmp/enstore/enstore/mam',
                                            'norestart':'INQ' }

### configdict['dlt.library_manager']    = {    'host':'rip5',
###                                             'port':7516,
###                                             'logname':'DLTLBM',
###                                             'database':'/tmp/enstore/enstore/dlt',
###                                             'norestart':'INQ' }


configdict['m2.library_manager']    = { 'host':'rip5',
                                        'port':7512,
                                        'logname':'M2LBM',
                                        'norestart':'INQ',
                                        'database': '/tmp/enstore/lm_db'}

configdict['null.library_manager']    = { 'host':'rip5',
                                        'port':7513,
                                        'logname':'NULLBM',
                                        'norestart':'INQ',
                                        'database': '/tmp/enstore/lm_db'}


configdict['a2.library_manager']    = { 'host':'rip5',
                                        'port':7514,
                                        'logname':'A2LBM',
                                        'database':'/tmp/enstore/enstore/mam',
                                        'norestart':'INQ' }

configdict['aml2r1.media_changer']   = { 'host':'rip5',
                                         'port':7523,
                                         'logname':'AML2R1',
                                         'type':'AML2_MediaLoader',
                                         'norestart':'INQ',
                                         'RobotArm':'R1',
                                         'IdleTimeHome':30000000,
                                         'IOBoxMedia':{'ACI_8MM':['E02','E03','E04'],'ACI_DECDLT':['E01']},
					 'DriveCleanTime':{'DE':[60,1],'DC':[60,1],'DM':[60,1]},
                                         'CleanTapeFileFamily':'CleanTapeFileFamily.noWrapper'}

configdict['m2_manual.media_changer'] = { 'host':'rip5', 
                                          'port':7538,   
                                          'type':'Manual_MediaLoader',
                                          'logname':'M2_M_MC'}

configdict['null.media_changer'] = { 'host':'rip5',
                                     'port':7524,
                                     'logname':'NULMC',
                                     'type':'RDD_MediaLoader',
                                     'norestart':'INQ'}

### configdict['nullI1.mover']  =  { 'host':'ripsgi',
###                                  'data_ip':'ripsgi',
###                                  'port':7538,
###                                  'logname':'NUI1MV', 'norestart':'INQ',
###                                  'library':'null.library_manager',
###                                  'device':'/dev/null',
###                                  'driver':'NullDriver',
###                                  'media_changer':'null.media_changer'}

### configdict['nullI2.mover']  =  { 'host':'ripsgi',
###                                  'data_ip':'ripsgi',
###                                  'port':7539,
###                                  'logname':'NUI2MV',
###                                  'norestart':'INQ',
###                                  'library':'null.library_manager',
###                                  'device':'/dev/null',
###                                  'driver':'NullDriver',
###                                  'media_changer':'null.media_changer'}

### configdict['nullI3.mover']  =  { 'host':'ripsgi',
###                                  'data_ip':'ripsgi',
###                                  'port':7540,
###                                  'logname':'NUI3MV',
###                                  'norestart':'INQ',
###                                  'library':'null.library_manager',
###                                  'device':'/dev/null',
###                                  'driver':'NullDriver',
###                                  'media_changer':'null.media_changer'}

### configdict['nullI4.mover']  =  { 'host':'ripsgi',
###                                  'data_ip':'ripsgi',
###                                  'port':7541,
###                                  'logname':'NUI4MV',
###                                  'norestart':'INQ',
###                                  'library':'null.library_manager',
###                                  'device':'/dev/null',
###                                  'driver':'NullDriver',
###                                  'media_changer':'null.media_changer'}

configdict['null17a.mover']  =  { 'host':'d0enmvr17a',
                                  'data_ip':'d0enmvr17a',
                                  'port':7542,
                                  'logname':'NU17aMV',
                                  'norestart':'INQ',
                                  'library':'null.library_manager',
                                  'device':'/dev/null',
                                  'driver':'NullDriver',
                                  'media_changer':'null.media_changer'}

configdict['null17b.mover']  =  { 'host':'d0enmvr17a',
                                  'data_ip':'d0enmvr17b',
                                  'port':7543,
                                  'logname':'NU17bMV',
                                  'norestart':'INQ',
                                  'library':'null.library_manager',
                                  'device':'/dev/null',
                                  'driver':'NullDriver',
                                  'media_changer':'null.media_changer'}


### configdict['DE01DLT.mover']  = { 'host':'rip2',
###                                  'data_ip':'rip2',
###                                  'port':7560,
###                                  'logname':'DE01MV',
###                                  'norestart':'INQ',
###                                  'library':['dlt.library_manager'],
###                                  'device':'/dev/rmt/tps3d1n',
###                                  'driver':'FTTDriver',
###                                  'max_buffer': 32*MB,
###                                  'mc_device':'DE01',
###                                  'media_changer':'aml2r1.media_changer'}


### configdict['DE02DLT.mover']  = {'host':'rip2',
###                                 'data_ip':'rip2',
###                                 'port':7561,
###                                 'logname':'DE02MV',
###                                 'norestart':'INQ',
###                                 'library':['dlt.library_manager'],
###                                 'device':'/dev/rmt/tps3d2n',
###                                 'max_buffer': 32*MB,
###                                 'driver':'FTTDriver',
###                                 'mc_device':'DE02',
###                                 'media_changer':'aml2r1.media_changer'}


configdict['DC03MAM.mover']  = { 'host':'rip2',
                                 'data_ip':'rip2',
                                 'port':7562,
                                 'logname':'DC03MV',
                                 'norestart':'INQ',
                                 'library':['mam.library_manager'],
                                 'device':'/dev/rmt/tps3d1n',
                                 'max_buffer': 16*MB,
                                 'driver':'FTTDriver',
                                 'mc_device':'DC03',
                                 'media_changer':'aml2r1.media_changer'}


configdict['DC04MAM.mover']  = { 'host':'rip1',
                                 'data_ip':'rip1',
                                 'port':7563,
                                 'logname':'DC04MV',
                                 'norestart':'INQ',
                                 'library':['mam.library_manager'],
                                 'device':'/dev/rmt/tps2d2n',
                                 'max_buffer': 16*MB,
                                 'driver':'FTTDriver',
                                 'mc_device':'DC04',
                                 'media_changer':'aml2r1.media_changer'}


configdict['DC05MAM.mover']  = { 'host':'rip2',
                                 'data_ip':'rip2',
                                 'port':7564,
                                 'logname':'DC05MV',
                                 'norestart':'INQ',
                                 'library':['mam.library_manager'],
                                 'device':'/dev/rmt/tps2d3n',
                                 'max_buffer': 16*MB,
                                 'driver':'FTTDriver',
                                 'mc_device':'DC05',
                                 'media_changer':'aml2r1.media_changer'}


configdict['DC06MAM.mover']  = { 'host':'rip1',
                                 'data_ip':'rip1',
                                 'port':7565,
                                 'logname':'DC06MV',
                                 'norestart':'INQ',
                                 'library':['mam.library_manager'],
                                 'device':'/dev/rmt/tps3d4n',
                                 'max_buffer': 16*MB,
                                 'driver':'FTTDriver',
                                 'mc_device':'DC06',
                                 'media_changer':'aml2r1.media_changer'}


 

configdict['M2_00.mover'] = {  'host': 'd0enmvr13a',
                               'data_ip':'d0enmvr13a',
                               'port': 7501,
                               'logname': 'M200MV',
                               'library': 'm2.library_manager',
                               'device' : '/dev/rmt/tps0d0n',
                               'driver' : 'FTTDriver',
                               'dismount_delay' : -1,
                               'max_buffer' : 200*MB, 
                               'media_changer' : 'm2_manual.media_changer' }

configdict['M2_20.mover'] = {  'host': 'd0enmvr13a',
                               'data_ip':'d0enmvr13b',
                               'port': 7502,
                               'logname': 'M220MV',
                               'library': 'm2.library_manager',
                               'device' : '/dev/rmt/tps2d0n',
                               'driver' : 'FTTDriver',
                               'dismount_delay' : -1,
                               'max_buffer' : 200*MB,
                               'media_changer' :'m2_manual.media_changer' }

configdict['M2_40.mover'] = {  'host': 'd0enmvr14a',
                               'data_ip':'d0enmvr14a',
                               'port': 7501,
                               'logname': 'M200MV',
                               'library': 'm2.library_manager',
                               'device' : '/dev/rmt/tps0d0n',
                               'driver' : 'FTTDriver',
                               'dismount_delay' : -1,
                               'max_buffer' : 200*MB, 
                               'media_changer' : 'm2_manual.media_changer' }

configdict['M2_60.mover'] = {  'host': 'd0enmvr14a',
                               'data_ip':'d0enmvr14b',
                               'port': 7502,
                               'logname': 'M220MV',
                               'library': 'm2.library_manager',
                               'device' : '/dev/rmt/tps2d0n',
                               'driver' : 'FTTDriver',
                               'dismount_delay' : -1,
                               'max_buffer' : 200*MB,
                               'media_changer' :'m2_manual.media_changer' }

configdict['M2_80.mover'] = {  'host': 'd0enmvr16a',
                               'data_ip':'d0enmvr16a',
                               'port': 7501,
                               'logname': 'M220MV',
                               'library': 'm2.library_manager',
                               'device' : '/dev/rmt/tps0d0n',
                               'driver' : 'FTTDriver',
                               'dismount_delay' : -1,
                               'max_buffer' : 200*MB,
                               'media_changer' :'m2_manual.media_changer' }

configdict['DM30A2.mover'] = {  'host': 'd0enmvr15a',
                                'data_ip':'d0enmvr15a',
                                'port': 7501,
                                'logname': 'DM30MV',
                                'library': 'a2.library_manager',
                                'device' : '/dev/rmt/tps2d1n',
                                'driver' : 'FTTDriver',
                                'max_buffer' : 100*MB,
                                'mc_device':'DM30',
                                'media_changer' :'aml2r1.media_changer' }

configdict['DM31A2.mover'] = {  'host': 'd0enmvr15a',
                                'data_ip':'d0enmvr15a',
                                'port': 7502,
                                'logname': 'DM31MV',
                                'library': 'a2.library_manager',
                                'device' : '/dev/rmt/tps2d2n',
                                'driver' : 'FTTDriver',
                                'max_buffer' : 100*MB,
                                'mc_device':'DM31',
                                'media_changer' :'aml2r1.media_changer' }

configdict['DM32A2.mover'] = {  'host': 'd0enmvr15a',
                                'data_ip':'d0enmvr15b',
                                'port': 7503,
                                'logname': 'DM32MV',
                                'library': 'a2.library_manager',
                                'device' : '/dev/rmt/tps0d1n',
                                'driver' : 'FTTDriver',
                                'max_buffer' : 100*MB,
                                'mc_device':'DM32',
                                'media_changer' :'aml2r1.media_changer' }

configdict['DM33A2.mover'] = {  'host': 'd0enmvr15a',
                                'data_ip':'d0enmvr15b',
                                'port': 7504,
                                'logname': 'DM33MV',
                                'library': 'a2.library_manager',
                                'device' : '/dev/rmt/tps0d2n',
                                'driver' : 'FTTDriver',
                                'max_buffer' : 100*MB,
                                'mc_device':'DM33',
                                'media_changer' :'aml2r1.media_changer' }


#configdict['DM07AIT.mover']  = { 'host':'ripsgi', 'port':7566, 'execution_env':'devel', 'logname':'DM07MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d1nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM07', 'media_changer':'aml2r1.media_changer',
#				 'statistics_path':'/tmp/ENstatistics.DM07' }

#configdict['DM08AIT.mover']  = { 'host':'ripsgi', 'port':7567, 'execution_env':'devel', 'logname':'DM08MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d2nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM08', 'media_changer':'aml2r1.media_changer',
#				 'statistics_path':'/tmp/ENstatistics.DM08' }

#configdict['DM09AIT.mover']  = { 'host':'ripsgi', 'port':7568, 'execution_env':'devel', 'logname':'DM09MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d5nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM09', 'media_changer':'aml2r1.media_changer',
#				 'statistics_path':'/tmp/ENstatistics.DM09' }

#configdict['DM10AIT.mover']  = { 'host':'ripsgi', 'port':7569, 'execution_env':'devel', 'logname':'DM10MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d6nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM10', 'media_changer':'aml2r1.media_changer',
#				 'statistics_path':'/tmp/ENstatistics.DM10' }

#configdict['DM11AIT.mover']  = { 'host':'ripsgi', 'port':7570, 'execution_env':'devel', 'logname':'DM11MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d3nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM11', 'media_changer':'aml2r1.media_changer',
#				 'statistics_path':'/tmp/ENstatistics.DM11' }

#configdict['DM12AIT.mover']  = { 'host':'ripsgi', 'port':7571, 'execution_env':'devel', 'logname':'DM12MV', 'norestart':'INQ',
#                                 'library':['ait.library_manager'], 'device':'/dev/rmt/tps2d4nrvc', 'driver':'FTTDriver',
#                                 'mc_device':'DM12', 'media_changer':'aml2r1.media_changer',
#	 			 'statistics_path':'/tmp/ENstatistics.DM12' }

"""
From cgw@fnal.gov Thu Jul  6 22:34:19 2000
Date: Thu, 06 Jul 2000 16:09:51 -0500 (CDT)
From: Charles G Waldman <cgw@fnal.gov>
To: bakken@fnal.gov
Subject: V2 mover configuration


These are all the keys that the mover cares about:

host (string) REQUIRED

port (int) REQUIRED

logname (string) OPTIONAL - defaults to mover name

do_eject (string) OPTIONAL - defaults to 'yes', override by setting
                    "no" or "No" (or anything starting with N or n)

mc_device (string) not needed for NULL movers; required otherwise

media_type (string) OPTIONAL - defaults to "8MM"  (see note ***)

min_buffer (int)  OPTIONAL minimum amount of memory to allocate for
                      buffering - defaults to 8MB

max_buffer (int)  OPTIONAL maximum amount of memory to allocate for
		      buffering - defaults to 64MB

device (string) REQUIRED pathname to the UNIX tape device
			 for NULL movers make this /dev/null

dismount_delay (int) OPTIONAL delayed dismount value to use when none 
		     specified by the client.  Also, the client cannot
		     reduce this amount - they can ask for longer
		     dismount delay, but this value is a minimum.
		     Defaults to 60 seconds.
		     Set to negative value to get "infinite" dismount
		     delay.
mount_delay (int) OPTIONAL number of seconds to wait after media
		  changer mount completes, before trying to open
		  device. Default is 15 for FTT driver, 0 for NULL
		  driver

library (string or list):  REQUIRED.  Who are we working for?  One or
		  more library manager names.

driver (string): REQUIRED.  Currently must be 'FTTDriver' or
		 'NullDriver', or else mover will complain at startup.
		 If we need a disk mover, this would be easy to hack 
		 together; doesn't seem too useful though.

Notes:

***	   This is a bit of a hack.  When the mover starts up with a
volume, the delayed dismount timer gets started; if the timer expires
before any transaction comes in, the mover tries to dismount the
tape.  However it hasn't talked to the volume clerk and therefore
doesn't have the full vol_info ticket.  I can't just go query the
volume because I don't have a volume clerk address - this comes in on
an ENCP ticket.  I could go to my configuration and get the volume
clerk address from there, but we didn't want to do this - the mover
could possibly, for example, talk to different VC's if it's talking to
different LM's.  In order to dismount the volume, I need at least the
label and the media type.  If I don't have a media type, I get it from
the mover config.  Like I said, this is a hack.  I think the right fix
is to have the media changer client not require media type in the work
ticket - it should be able to dismount the volume without this info
(?)

"""

