name: stage-patchnotes

on: # commit to develop if path modified: src/... modules/...
  push:
    branches:
      - 'develop'
  paths:
      - 'src/**'
      - 'modules/**'

jobs:
  stage-patchnotes:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          ref: ${{ github.head_ref }}

      - name: Copy git logs to patchnotes
        run: -
          git log develop..{{ github.head_ref }} >> release_notes/ENSTORE_NONPROD_V_NEXT
          git add release_notes/ENSTORE_NONPROD_V_NEXT

      - uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: Stage release notes
