<body>

<CENTER><B><I><U><FONT COLOR="#000099"><FONT SIZE=+4>100 BULLET ANALYSIS</FONT></FONT></U></I></B></CENTER>
<p>

One of the outcomes of the April 98 HPSS workshop at Fermilab was an attempt
by IBM to try and understand what Fermilab needed out of mass storage system
and how/if HPSS could meet the requirements.  Numerous meetings took place in
which IBM people (Otis Graf + Harry Hulen), CD people (primarily Don P), and
CDF/D0 people tried to specify what Run II requirements are. The report from
these meetings is "Functional Requirements for the Fermilab Run II Mass
Storage System" and is available at
<a href=http://www5.clearlake.ibm.com:6001/Fermilab/FermiReq5.html>http://www5.clearlake.ibm.com:6001/Fermilab/FermiReq5.html</a>.
The work is by all the people who participated, but the actual writing was
done by Otis Graf at IBM; and because of this certain HPSS biases and non
Fermilab requirements remain.

<p>

A list of "shalls/musts" was extracted from the document - this
resulted in the "100 Bullet List".  The goal of doing this was to try
and see if the report could be distilled into a list that could be
prioritized.  The numbers in parentheses you see in the paragraphs
below correspond to order that "shall" was found in the original
report.  Since 100 items is a large number to consider individually
and to match other attempts at synthesis of the critical requirements
for a mass storage system, the "100 Bullet List" was then reordered
into 10 broad categories and this is what you will find below.
<ol>
<li><a href="#RASTC">Retrieve and Specify Tape Contents</a>
<li><a href="#ETS">Eject to Shelf</a>
<li><a href="#RO">Read Only</a>
<li><a href="#IMPRT">Import</a>
<li><a href="#OF">Open Format</a>
<li><a href="#RM">Resource Management</a>
<li><a href="#AVAIL">Availability</a>
<li><a href="#FT">Fault Tolerance</a>
<li><a href="#ADM">Administration and Monitoring</a>
<li><a href="#DM">Data Migration</a>
<li><a href="#MISC">Unclassified</a>
</ol>

<p>

There are 2 clear IBM/HPSS biases that should be noted in the list, others
probably exist as well:
<menu>
  <li> Requiring files to not span tapes would be desireable for our
       applications, but VERY difficult for HPSS to meet.

   <li> GUI interfaces/displays should be low priority; CLI interfaces are
        the main interface and are needed at startup.
</menu>

<p>
<p>
This section attempts to address these same requirements from Enstore's
perspective. In the difficulty column, "None" means that the requirement is
inherent to enstore's design or else it is already implemented in the
prototype and requires little or no extra work.
<p>
<p>

<table>
<tr>
<td>
<td align=left valign=top><strong>Category and Requirement</strong></td>
<td align=left valign=top><strong>Enstore Remarks </strong></td>
<td align=left valign=top><strong>Difficulty </strong></td>
</tr>
<tr><tr><tr>

<!============================================================================= >
<! Retrieve and Specify Tape Contents >
<a name="RASTC">
<tr>
<td>
<td align=left valign=top><strong>
Retrieve and Specify Tape Contents
</strong></td></tr>

<tr><td align=left valign=top>
(2)
<td align=left valign=top>
Data files shall be located on tape in such a way as to optimize efficient
    access to the files.
</td><td align=left valign=top>
Enstore puts files on tape in the order the files were submitted using a file family and file
family width scheme. The experiments can control file placement on tape within
these limits.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(10)
<td align=left valign=top>
The MSS shall allow data files to be placed on tape media in such a way
     that the files can be efficiently accessed and retrieved from the storage
     system.
</td><td align=left valign=top>
Same as (2)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(13)
<td align=left valign=top>
The MSS shall allow MSS clients to identify groups of files that are to
     be stored on a common set of physical tape volumes. The MSS shall
     guarantee that physical tape volumes only contain files identified to be
     part of the same grouping.
</td><td align=left valign=top>
Same as (2)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(14)
<td align=left valign=top>
The MSS shall ensure that tape media is efficiently utilized. Files
     should be appended to tapes in such a way that all the media is used and
     tape is written to physical end of media.
</td><td align=left valign=top>
Enstore expects ftt to provide correct information from the media devices and
will use this information to fill tapes. It will not attempt to span files
across tapes and as such will never completely fill tapes - there will always
be less space left on the tape than the nominal filesize.
</td><td align=left valign=top> Easy </td></tr>

<tr><td align=left valign=top>
(15)
<td align=left valign=top>
Files shall span tapes (if necessary) in order to fill an allocated
     tape(physical volume) in a storage class before starting a new tape.
</td><td align=left valign=top>
Enstore does not plan to span files across tapes.
</td><td align=left valign=top>Not planned</td></tr>

<tr><td align=left valign=top>
(16)
<td align=left valign=top>
Each tape physical volume shall only contain files belonging to a single
     file family.
</td><td align=left valign=top>
File families provide this feature.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(17)
<td align=left valign=top>
There shall be up to 1000 (TBD) different file families.
</td><td align=left valign=top>
There are no limits, within reason - one can make more file families than
there will be tapes in Run II.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(18)
<td align=left valign=top>
A user with appropriate authorization shall be able to create a new file
     family.
</td><td align=left valign=top>
PNFS allows this
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(19)
<td align=left valign=top>
A file family shall belong to one or more user groups.
</td><td align=left valign=top>
PNFS has a standard Unix file protection/access scheme.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(21)
<td align=left valign=top>
A file family shall have the property of "width". The MSS shall, given
     sufficient physical resources, be able to concurrently mount the number
     of tapes equal to the width of the file family, and shall be able to
     write files to those tapes in parallel.
</td><td align=left valign=top>
File families have the feature of width.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(22)
<td align=left valign=top>
The width of a file family shall not exceed the number of physical + tape
     drives in the storage system.
</td><td align=left valign=top>
There is no current automatic tool that guarantees this in Enstore, but it is
straightforward to develop. Enstore will use the drives allocated to a family.
</td><td align=left valign=top> Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(23)
<td align=left valign=top>
The user or application shall be able to specify the family name or ID at
     the time the file is created.
</td><td align=left valign=top>
Pnfs and Encp allow this.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(26)
<td align=left valign=top>
It will be useful to have namespace objects that are mapped to physical
     tape volumes.
</td><td align=left valign=top>
This is a straightforward development.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(31)
<td align=left valign=top>
Tools shall be available so that users can determine the mapping of files
     to tapes.  These tools shall generate the following reports and lists:
     List of all files on a tape (or set of tapes) and location of files on
     the tape; Indication of whether file is internal or external to tape
     library. Oldest and Youngest file on a tape.
</td><td align=left valign=top>
These tools can be developed.
</td><td align=left valign=top> Medium  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(38)
<td align=left valign=top>
Tools shall be available so as to identify tape volumes by file, file
     family, creation/change dates of files, and date of last tape mount.
     These tools shall allow users to identify tapes that are candidates for
     removal from the tape library. Users shall be able to generate reports
     from MSS metadata, as follows: List all of the tapes belonging to a File
     Family and date of most recent mount of the tape. List all of the tapes
     within a File Family such that each file is older than a specified
     date.Location of a file (or set of files): tape identifier and whether
     internal or external to the tape library. List of tape volumes, sorted by
     date of the most recent mount of the tape. Indicate whether tape is
     internal or external to library.
</td><td align=left valign=top>
Same development as (31)
</td><td align=left valign=top><td align=left valign=top></tr>

<tr><td align=left valign=top>
(39)
<td align=left valign=top>
The report shall indicate MSS behavior when an access attempt is made of
     a file on the tape: (1) request operator mount,or (2) return warning
     message to user.
</td><td align=left valign=top>
Same development as (31)
</td><td align=left valign=top><td align=left valign=top></tr>

<tr><td align=left valign=top>
(59)
<td align=left valign=top>
Users shall be able to use the report and list generation tools described
     in Section 2.
</td><td align=left valign=top>
Nothing in the design prevents users from having these capabilities.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(85)
<td align=left valign=top>
An application or user shall be able to determine the
     family name and ID of a file through the FTP and API interfaces.
</td><td align=left valign=top>
Pnfs allows this - specific api's will need to be developed.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(86)
<td align=left valign=top>
A user can create reports on file, family, and volume information such
     as: The family name, COS and volume of a file. All of the files in a file
     family, All of the tape volumes in a file family.
</td><td align=left valign=top>
Same development as (31)
</td><td align=left valign=top><td align=left valign=top></tr>

<tr><td align=left valign=top>
(87)
<td align=left valign=top>
A user shall be able to create a file family by using a utility program.
</td><td align=left valign=top>
Fully allowed by pnfs.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Eject to shelf >
<a name="ETS">
<tr>
<td>
<td align=left valign=top><strong>
Eject to Shelf
</strong></td></tr>

<tr><td align=left valign=top>
(3)
<td align=left valign=top>
Data files shall be located on tape in such a way as to allow tapes to be
    removed from the robotic library and placed in a vault or distributed to
    another organization.
</td><td align=left valign=top>
Experiments can specify the format and placement of data. Within these bounds,
this requirement is met.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(32)
<td align=left valign=top>
The utilities for ejecting and returning tapes from/to the MSS tape
     library (or libraries) shall be capable of automatically running in the
     background to the core MSS servers as a batch job, and shall not
     interfere with the normal operation of the MSS and tape robotic arm.
</td><td align=left valign=top>
Development of tools is new straightforward work. Modifications to the media
changes will have to be made.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(33)
<td align=left valign=top>
Ejected tapes could also remain in the tape library, but be assigned to
     another storage software.
</td><td align=left valign=top>
Volume clerk allows this.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(34)
<td align=left valign=top>
It shall be possible for a user (member of the group(s) that own tape
     volumes) to specify a list of volumes that the robotic library will eject
     from the library.
</td><td align=left valign=top>
OK
</td><td align=left valign=top>  None<td align=left valign=top></tr>

<tr><td align=left valign=top>
(35)
<td align=left valign=top>
When selecting a tape to be ejected, a user shall be able to specify the
     type of behavior that is to occur if a file on the tape is subsequently
     requested for access. The user shall be able to specify one of the two
     types of behavior: When a file access is attempted (open for read or
     write), a message is displayed to the MSS operator that requests that the
     affected tape be retrieved from the vault and mounted in a tape drive or
     placed back into the library.The file access fails, and an appropriate
     error message is returned to the user indicating that the file is not
     currently available
</td><td align=left valign=top>
Straightforward development. This is a simple change in the volume clerk
tables to switch library manager for ejected volumes.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(36)
<td align=left valign=top>
If a file spans tape volumes and at least one of the volumes has been
     ejected from the library, the MSS shall exhibit one of the behaviors
     described above.  That behavior shall be the same as if ALL the volumes
     on which the file resides were ejected from the library.
</td><td align=left valign=top>
Files do not span tapes.
</td><td align=left valign=top>Not planned<td align=left valign=top></tr>

<tr><td align=left valign=top>
(37)
<td align=left valign=top>
It shall be possible for the user to change the file access behavior of
     an ejected tape after the tape has been removed from the tape library.  A
     tool and user interface shall be available to allow the user to change
     that part of the MSS metadata that controls the policy of attempting to
     read a file from an ejected tape.
</td><td align=left valign=top>
Straightforward development
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(40)
<td align=left valign=top>
An MSS utility program shall allow tapes to be marked for ejection.
</td><td align=left valign=top>
Straightforward development
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(41)
<td align=left valign=top>
The utility shall also interact with the robot to cause the tapes to be
     ejected and will mark the MSS file/tape metadata to show that the tapes
     are not in the robotic library.
</td><td align=left valign=top>
Same as (40)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(42)
<td align=left valign=top>
This utility shall run in the background to the MSS core servers, and
     shall not interfere with the normal operation of the MSS.
</td><td align=left valign=top>
Same as (40)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(43)
<td align=left valign=top>
The utility shall take the following options:Maximum number of tape
     volumes to eject.
</td><td align=left valign=top>
Same as (40)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(44)
<td align=left valign=top>
When tapes are ejected from the MSS library, an associated set of
     intermediate metadata shall also (optionally) be exported as a flat file.
</td><td align=left valign=top>
Straight forward development
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(45)
<td align=left valign=top>
This metadata file shall provide tape file information such that a
     utility program could read the files and copy them to a standard Unix
     file system.
</td><td align=left valign=top>
File wrappering information provides this.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(46)
<td align=left valign=top>
The tape eject utility shall have the option to leave the tape in the
     library so that it is available to another software application that
     could read the MSS tape.
</td><td align=left valign=top>
Volume clerk allows this.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(47)
<td align=left valign=top>
The MSS shall be able to exchange (total of eject/export and
     re-insert/import) up to 200 tapes per day through the robot(s) I/O tray.
</td><td align=left valign=top>
Really depends on the hardware - Enstore will not get in the way.
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(48)
<td align=left valign=top>
There shall be two scenarios whereby volumes are re-inserted into the
     tape library.  Tape is manually inserted by the operator in response to a
     open read/write request.Batches of tapes can be re-inserted into the
     robotic tape library by stacking the cartridge (or cassettes) into the
     robot I/O tray
</td><td align=left valign=top>
Enstore could be used  to run operator driven tape drives. Operator
interaction would have to be developed. Library manager could interact with
OCS, for example.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Read Only >
<a name="RO">
<tr>
<td>
<td align=left valign=top><strong>Read Only
</strong></td></tr>

<tr><td align=left valign=top>
(27)
<td align=left valign=top>
It shall be possible to optionally mark a tape volume as "Read Only". The
     Read Only status of a tape shall be maintained in the MSS metadata.
</td><td align=left valign=top>
Volume clerk provides this capability. Moreover, enstore has a system and a
user read-only flag that can be controlled independently.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(28)
<td align=left valign=top>
Tapes shall be marked as ReadOnly under the one of the following
     conditions: All of the files on the tape are older than a specified
     period of time.
</td><td align=left valign=top>
A straightforward utility would have to be written to do this.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(29)
<td align=left valign=top>
Tools shall be available so that tapes can be marked and unmarked as Read
     Only.
</td><td align=left valign=top>
Same as (27)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(30)
<td align=left valign=top>
If a user or application attempts to open for writing a file that is
     marked as "Read Only", a suitable error message shall be returned to the
     user by the MSS interface program.
</td><td align=left valign=top>
Already provided by volume.
</td><td align=left valign=top> None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(53)
<td align=left valign=top>
Tapes that have been ejected (but not exported) for the purpose of
     reading outside of the MSS should be physically marked as "Read Only"
     because the MSS metadata still accounts for these tapes and it is assumed
     that they be eventually placed back into the MSS library.
</td><td align=left valign=top>
Already provided by volume clerk.
</td><td align=left valign=top>  None <td align=left valign=top></tr>


<tr><tr><tr>

<!============================================================================= >
<! Import >

<tr>
<a name="IMPRT">
<td>
<td align=left valign=top><strong>
Import
</strong></td></tr>

<tr><td align=left valign=top>
(55)
<td align=left valign=top>
A utility shall be provided that can write files to tapes and can create
     a set of intermediate metadata, such that the tapes and metadata can be
     imported into the Fermilab MSS.
</td><td align=left valign=top>
External tapes written in a acceptable format should be able to be
imported. This is new work beyond what has been done.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(56)
<td align=left valign=top>
This utility shall be executable external to the MSS, on other
     processor(s), at other sites or institutions.
</td><td align=left valign=top>
Part of (55)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(57)
<td align=left valign=top>
A utility shall be provided that will allow tapes (and associated
     metadata) to be imported into the MSS.
</td><td align=left valign=top>
Part of (55)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(58)
<td align=left valign=top>
An export utility will be provided that will allow tapes to be exported
     from the MSS.
</td><td align=left valign=top>
Straightforward development.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><tr><tr>


<!============================================================================= >
<! Open Format >
<a name="OF">
<tr>
<td>
<td align=left valign=top><strong>
Open Format
</strong></td></tr>

<tr><td align=left valign=top>
(49)
<td align=left valign=top>
An "open" tape and metadata format shall be provided such that software
     (external of the MSS software and infrastructure) can read files from
     ejected tapes, and can write files to tapes that will be imported into
     the Fermilab MSS.
</td><td align=left valign=top>
Within current implementation - but more "open" formats will have to be
acceptable.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(50)
<td align=left valign=top>
The open formats shall allow other programs, utilities, and other mass
     storage systems to read and write tapes that are compatible with the
     Fermilab MSS.
</td><td align=left valign=top>
True by definition.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(51)
<td align=left valign=top>
A utility shall be provided that can read files from tapes that have been
     ejected or exported from the MSS robotic tape library system.
</td><td align=left valign=top>
OK. It is expected that the experiments already can read their own data formats.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(52)
<td align=left valign=top>
This utility program shall be able to run outside of and independent of
     the MSS servers and infrastructure, and would make use of a set of
     metadata associated with the tapes.
</td><td align=left valign=top>
Same as (49)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(54)
<td align=left valign=top>
All tapes written by the Fermilab MSS shall be in the native format (for
     example, in HPSS format).
</td><td align=left valign=top>
All tapes will be written in an agreed upon format, probably not hpss.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Resource Management >
<a name="RM">
<tr>
<td>
<td align=left valign=top><strong>
Resource Management
</strong></td></tr>

<tr><td align=left valign=top>
(1)
<td align=left valign=top>
The storage equipment will be shared by the experiment groups and the MSS
    shall provide a priority system so that each group has access to its quota
    of resources.
</td><td align=left valign=top>
Provided already by the dynamic movers.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(4)
<td align=left valign=top>
Tape drives will be in short supply, and thus tape drive activity shall be
    optimized.
</td><td align=left valign=top>
OK, movers try to write/read as much as possible for given tape.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(5)
<td align=left valign=top>
The number of tape mounts shall be minimized for typical file access
    patterns.
</td><td align=left valign=top>
Library manager provides this.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(7)
<td align=left valign=top>
Robotic tape libraries (especially the robot arm and storage slots) will
    be in short supply, and their use shall be optimized.
</td><td align=left valign=top>
Not clear to me how Enstore can optimize this. Dropped from HPSS requirements?
</td><td align=left valign=top>  ??? <td align=left valign=top></tr>

<tr><td align=left valign=top>
(11)
<td align=left valign=top>
The MSS shall provide the capability to configure storage resources
     (drives and media) into different groupings, such that files requiring
     different storage or administrative characteristics (e.g., high-volume
     date rates, low latency to access data, group X's tape volumes) can be
     directed to an appropriate set of storage resources.
</td><td align=left valign=top>
Dynamic movers provide this. Needs to be tuned and automated
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(24)
<td align=left valign=top>
The MSS shall provide the capability for files to be written directly to
     a tape media. The MSS shall also provide the capability for files that
     were initially written directly to tape to either be read directly from
     tape or first staged to disk before being read (to perform speed matching
     and/or file buffering).  It shall be possible to assign ownership of a
     COS to a user group.
</td><td align=left valign=top>
Movers provide direct tape access - no disk buffer/cache implemented yet.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(25)
<td align=left valign=top>
It shall also be possible to configure the MSS such that a COS will have
     ownership of storage resources (tape volumes) and devices (tape drives).
     Read Only Access for Groups of Tapes (and Files).
</td><td align=left valign=top>
Movers provide "ownership" of devices. PNFS provides ownership of tape.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(60)
<td align=left valign=top>
The Fermilab MSS shall provide an
     application programming interface (API) so that client software programs
     can access the storage system servers.
</td><td align=left valign=top>
If this means clients can attach directly to drives, it is not in the current
prototype, but it is an extension that was in the original plan. Lots of
details need to be understood for this to work properly.
</td><td align=left valign=top>  Hard <td align=left valign=top></tr>

<tr><td align=left valign=top>
(61)
<td align=left valign=top>
This API shall execute on the client processor, shall provide C++
     language interfaces, and shall not require MSS infrastructure software
     (DCE, Encina, SFS, SAMMI) on the client processor.
</td><td align=left valign=top>
User APIs in the various languages will have to be written
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(62)
<td align=left valign=top>
The client API shall be available in source and binary for the following
     OS platforms: SGI IRIX, IBM AIX, Digital Unix, Intel Linux, Windows NT,
     Sun Solaris.
</td><td align=left valign=top>
Not all platforms have been checked - underlying dependent layers must also
work on them.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(64)
<td align=left valign=top>
For some categories of data, files must be copied to tape as soon as
     possible. Therefore, it must be possible to allocate a minimum number of
     tape drives to the process of writing the privileged categories of files
     to tape.
</td><td align=left valign=top>
Dynamic mover configuration provides this.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(65)
<td align=left valign=top>
When possible, the MSS shall optimize the use of multiple robotic
     libraries and arms so as to maximize the capacity of the system to
     perform tape cartridge movement. It shall be possible to queue up
     requests to move tape volumes.
</td><td align=left valign=top>
Library manager provides this - a better optimization can be done.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(66)
<td align=left valign=top>
The MSS software shall have the capability to limit file system requests
     such that the available resources will not be exhausted.
</td><td align=left valign=top>
Part of current design - needs review.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(67)
<td align=left valign=top>
When a request is made to read or write a file to the MSS, the system
     shall return an estimated time to complete the request.
</td><td align=left valign=top>
I think this is very hard to do for all but the simplest cases. Tape and drive
optimization affect this dramatically.
</td><td align=left valign=top> Very Hard <td align=left valign=top></tr>

<tr><td align=left valign=top>
(68)
<td align=left valign=top>
The MSS shall allow the establishment of quotas for storage resources.
     These limits shall be established for a single user, user group, and file
     family.
</td><td align=left valign=top>
Quota management is requires design and implementation.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(69)
<td align=left valign=top>
Quotas shall include: Number of objects in the namespace (files,
     filesets, directories, etc.
</td><td align=left valign=top>
Same as (68)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(70)
<td align=left valign=top>
The gatekeeper function shall filter requests to the MSS and throttle
     use.  The gatekeeper shall provide the capability for user level
     scheduling of storage requests.
</td><td align=left valign=top>
Library manager can handle this, in principle. Not clear to me how filter gets
developed. Throttling takes place elsewhere in servers.
</td><td align=left valign=top>  Hard <td align=left valign=top></tr>


<tr><td align=left valign=top>
(71)
<td align=left valign=top>
All user access methods(NFS, FTP, client API, DFS) shall go through the
     gatekeeper, which shall provide the following system throttling
     functions: Temporarily suspend access to the MSS in order to allow
     maintenance activities and/or implementation of additional resources
     (such as mover nodes, tape drives, etc.)
</td><td align=left valign=top>
Throttling is provided in encp and pnfs. No need for an extra gatekeeper.
</td><td align=left valign=top>  None<td align=left valign=top></tr>

<tr><td align=left valign=top>
(84)
<td align=left valign=top>
The process of loading, labeling, and allocating the blank tape volumes
     shall be done in the background to the core MSS software and shall not
     interfere with the other MSS operations.
</td><td align=left valign=top>
Code needs to be written to allow this to work efficiently.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>


<tr><tr><tr>

<!============================================================================= >
<! Availability >

<a name="AVAIL">
<tr>
<td>
<td align=left valign=top><strong>
Availability
</strong></td></tr>

<tr><td align=left valign=top>
(6)
<td align=left valign=top>
There will be unattended operations for at least eight hours per day,
    seven days per week.
</td><td align=left valign=top>
Goal, unproven as of yet.  Substantial error analysis and testing required.
</td><td align=left valign=top>  Medium+long <td align=left valign=top></tr>

<tr><td align=left valign=top>
(8)
<td align=left valign=top>
Recording to tape of raw experiment data shall continue for several weeks
    (up to a month) at a time. This data recording shall be uninterrupted by
    lower priority file I/O activity or system management tasks (such as
    metadata backups, software upgrades, etc.)
</td><td align=left valign=top>
Movers can be pre-allocated. Software should not be limiting factor.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(73)
<td align=left valign=top>
The MSS shall be able to support 30 days of continuous data file
     acquisition and accumulation to tapes in the robotic tape libraries. The
     30 day (minimum) time interval shall not be interrupted by maintenance
     activities or system outages (defined as unable to continue to record
     data files).
</td><td align=left valign=top>
Goal, unproven as of yet.  Substantial error analysis and testing required.
Same work as (6)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(82)
<td align=left valign=top>
Data Acquisition. The MSS shall be able to receive files of raw
     experiment data at the peak sustained rate of 35 MB/sec. The data
     acquisition rate of 35 MB/ sec (3 TB per day) shall be sustained for a
     period of 30(TBD) days.
</td><td align=left valign=top>
Goal, dictated by the hardware - software should not be in the way.
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(83)
<td align=left valign=top>
The MSS shall be able to receive a total of 5 TB of data per day,
     equivalent to 100 tapes. The MSS shall be able to add 700 blank tape
     volumes per week.
</td><td align=left valign=top>
Goal, dictated by the hardware - software should not be in the way.

</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(95)
<td align=left valign=top>
The MSS system shall also provide the capability to issue alarms under
     the following conditions: The MSS system falls below a TBD threshold
     capacity or performance.  Certain TBD critical work cannot be completed.
</td><td align=left valign=top>
Planned work - straightforward development.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Fault Tolerance >
<a name="FT">
<tr>
<td>
<td align=left valign=top><strong>
Fault Tolerance
</strong></td></tr>

<tr><td align=left valign=top>
(72)
<td align=left valign=top>
The failure of a single component shall not cause the system to become
     unavailable for the high priority data movement tasks.
</td><td align=left valign=top>
Single points of failure (file clerk, library manager...) need to be
robust. Multiple movers need failure/restart procedures.
</td><td align=left valign=top>  Hard <td align=left valign=top></tr>

<tr><td align=left valign=top>
(74)
<td align=left valign=top>
The system shall have a fail-over capability such that if a component
     fails, file access services shall continue at reduced capacity.
</td><td align=left valign=top>
Enstore can accommodate failed hardware to some extent - making this robust is
a significant effort.
</td><td align=left valign=top>  Hard <td align=left valign=top></tr>

<tr><td align=left valign=top>
(75)
<td align=left valign=top>
In case a failure or error condition occurs with a fail-over component, a
     message shall be logged to a report file, but file services shall
     continue without operator intervention.
</td><td align=left valign=top>
Straightforward (once (72) and (74) are done)
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(76)
<td align=left valign=top>
When a read/write error occurs with a tape drive, the system shall retry
     TBD times and shall log error counts.
</td><td align=left valign=top>
Straightforward development
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(77)
<td align=left valign=top>
If the tape drive still generates errors after the maximum number of
     retries, the MSS shall take the tape drive off-line and retry the file or
     tape operation (such as stage, migrate, or repack) with another tape
     drive.
</td><td align=left valign=top>
Straightforward development
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(78)
<td align=left valign=top>
Processor nodes that are used for data movement (to/from MSS clients and
     between storage hierarchies) and to control storage devices (tape drives
     and disks) shall have the capability to be automatically taken off-line
     without bringing down other MSS services.
</td><td align=left valign=top>
Dynamic movers provide this capability - Not automated today.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(79)
<td align=left valign=top>
When a data movement processor fails, file access services shall continue
     at reduced capacity,a message shall be logged to a report file, and file
     services shall continue without operator intervention.
</td><td align=left valign=top>
Really same work as (78)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(80)
<td align=left valign=top>
It shall be possible to bring the repaired processor back on-line without
     disruption to the other MSS services.
</td><td align=left valign=top>
Same as (78)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(81)
<td align=left valign=top>
When a disk drive fails, the MSS shall take it off line and mark the
     drive down.
</td><td align=left valign=top>
Same as (78), except Enstore doesn't currently manage disks.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(97)
<td align=left valign=top>
File Transfer Errors To/From MSSClient - Determine if error is due to
     network, client processor machine,corrupted file, etc.
</td><td align=left valign=top>
Work needs to be done to make this robust.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Administration and Monitoring >
<a name="ADM">
<tr>
<td>
<td align=left valign=top><strong>
Administration and Monitoring
</strong></td></tr>

<tr><td align=left valign=top>
(20)
<td align=left valign=top>
A graphical user interface (GUI) shall be available to give users the
     ability to list, add, and manage files in file families.
</td><td align=left valign=top>
Enstore provides CLI interfaces that GUIs could be built on. Lengthy
development needs to be done for GUI work.
</td><td align=left valign=top>  Medium<td align=left valign=top></tr>

<tr><td align=left valign=top>
(88)
<td align=left valign=top>
Trash Basket - When files are deleted, they shall go into a trash basket.  New work
</td><td align=left valign=top>
Straightforward implementation for DESY protocol. Metadata purged only when
tapes squeezed.  Some work to restore files from trashbin.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(89)
<td align=left valign=top>
There shall be a TBD limit to the number of files that can exist in the
     trash basket for a user or group.
</td><td align=left valign=top>
Enstore doesn't have a limit.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(90)
<td align=left valign=top>
All administrative and system management functions shall be accessible
     through a GUI and through Unix shell commands (such as Korn shell).
</td><td align=left valign=top>
Enstore provides CLI interfaces that GUIs could be built on. Lengthy
development needs to be done for GUI work.
</td><td align=left valign=top> medium<td align=left valign=top></tr>

<tr><td align=left valign=top>
(91)
<td align=left valign=top>
Unless otherwise noted, these functions shall operate in the background
     to the MSS servers, and shall not interfere with the normal operation of
     the Fermilab MSS. The complete list of functions is TBD.
</td><td align=left valign=top>
OK, unless otherwise noted.
</td><td align=left valign=top>  None <td align=left valign=top></tr>

<tr><td align=left valign=top>
(92)
<td align=left valign=top>
The MSS system monitor shall provide GUI displays of health and status of
     all components in the system.
</td><td align=left valign=top>
CLI Health monitor needs further development. Gui means lengthy development
time. We have a rudimentary WEB display now.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>


<tr><td align=left valign=top>
(93)
<td align=left valign=top>
When error or failure conditions occur, the system monitor shall provide
     visual notification through GUI status indicators.
</td><td align=left valign=top>
CLI Health monitor needs further development. Gui means lengthy development time.
Learning to interface with data center is part of the task and has a learning curve.
</td><td align=left valign=top>  Medium <td align=left valign=top></tr>

<tr><td align=left valign=top>
(94)
<td align=left valign=top>
Some critical messages shall also automatically be sent to operators by
     e-mail.
</td><td align=left valign=top>
Logger could be extended to do this.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(96)
<td align=left valign=top>
The MSS Health and Status system shall have a command line (CLI)
     capability such that a shell script (or software product) can receive the
     alarms and repair the alarm condition.
</td><td align=left valign=top>
Same as (92)
</td><td align=left valign=top>  <td align=left valign=top></tr>

<tr><td align=left valign=top>
(98)
<td align=left valign=top>
Number of read/write error for each disk drive.
</td><td align=left valign=top>
This info is all available, utilities  for keeping and presenting it need
to be developed.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(99)
<td align=left valign=top>
Tape drive use
</td><td align=left valign=top>
This info is all available, utilities  for keeping and presenting it need
to be developed.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><td align=left valign=top>
(100)
<td align=left valign=top>
Number of read/write errors for each tape drive.
</td><td align=left valign=top>
This info is all available, utilities  for keeping and presenting it need
to be developed.
</td><td align=left valign=top>  Easy <td align=left valign=top></tr>

<tr><tr><tr>

<!============================================================================= >
<! Data Migration (HSM) >
<a name="#DM">
<tr>
<td>
<td align=left valign=top><strong>
Data Migration (HSM)
</strong></td></tr>

<tr><td align=left valign=top>
(12)
<td align=left valign=top>
The MSS shall provide the capability to build storage hierarchies
     containing a list of storage resource classes together with associated
     policies that shall be used to control data movement between those
     resources (e..g., a storage hierarchy containing disk at the top level of
     the hierarchy with tape at the second, lowest level; migration, purge and
     stage policies that control when file data is moved between levels and
     removed from the higher level)
</td><td align=left valign=top>
Enstore does not attempt to manage all levels of the storage
hierarchies. Enstore can be used as a front end to products that do attempt to
manage disks. A disk caching/buffer extension to Enstore is planned.  Enstore
imagines 4 levels of hierarchy: user disk, buffer/cache disk, library tape and
shelf tape. Enstore only seeks to manage the last two.
</td><td align=left valign=top>Very difficult</td></tr>

<tr><tr><tr>

<!============================================================================= >
<! NO CATEGORY YET >
<a name="MISC">
<tr>
<td>
<td align=left valign=top><strong>
Unclassified
</strong></td></tr>

<tr><td align=left valign=top>
(9)
<td align=left valign=top>
Evaluation of tape drives and associated media is still
    ongoing. Therefore, the required tape cartridges (or cassettes), drives,
    and robotic libraries have not yet been determined. These components will
    be specified in a later version of the MSS requirements.
</td><td align=left valign=top>
Enstore is designed to be a layered product. It uses a ftt layer to access
tapes and determine error counts and media capacity. New and unusual drives
will require implementation in ftt and possibly changes in the mover.
</td><td align=left valign=top>  Medium </td></tr>

<tr><td align=left valign=top>
(63)
<td align=left valign=top>
The MSS shall be scalable so as to provide the anticipated performance
     required by the Fermilab Run II experiments.
</td><td align=left valign=top>
Enstore is based on distributed movers and as such is very scalable in data
moving.  Bottlenecks will happen due to hardware limitations before the
software hinders performance. Database contention is possible - this can be
addressed by splitting them into several servers, but needs to be studied in detail.
</td><td align=left valign=top>  Medium </td></tr>

<tr><tr><tr>

<!============================================================================= >
<! Items not in requirements that need to get finished: >
<! >
<! >
<! -+ the ticket scheme is very handy but I think it is prone to problems. >
<!    There is no control or discipline on the ticket.  An OO approach >
<!    to the ticket would pay dividends.  At the least a data dictionary >
<!    for the ticket is needed. >
<! >
<! is it time to switch to C? >
<! >
<! general code cleanup - standards? >
<!         uniform ticket >
<! >
<! better tracing, logging capabilities >
<! >
<! wrappering framework >
<! >
<! attachable debugger >
<! >
<! i/o rate demonstration >
<! >
<! test stand >
<! >
<! database backups + pnfs >
<! >
<! user interface, user status >
<! >
<! retry logic, broken tcp connections >
<! >
<! volume list, file family list >
<! >
<! user documentation, internal documentation >
<! >
<! fmss interface >
<! >
<! ftt - more drive supported >
<! >
<! read different tape formats, including hpss >
<! >
<! regression tests >

</table>
</body> </html>
